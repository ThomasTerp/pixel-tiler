{"version":3,"sources":["data/themes.ts","AppContext.ts","Components/ToolButton.tsx","Components/Tools/Tool.tsx","Components/PaletteColor.tsx","Components/PaletteAddColor.tsx","Components/Palette.tsx","Components/Tools/FileTool.tsx","Components/Tools/BrushTool.tsx","Components/Tools/EraserTool.tsx","Components/Tools/SettingsTool.tsx","Components/SideMenu.tsx","Components/Tile.tsx","Components/GridTiles.tsx","Vector2D.ts","util.ts","Components/Grid.tsx","Emitter.ts","PaletteManager.ts","Components/App.tsx","reportWebVitals.ts","data/tilesets.ts","Tileset.ts","data/defaultPaletteColors.ts","index.tsx"],"names":["themes","dark","color1","color2","color3","white","AppContext","React","createContext","theme","ToolButton","props","state","toolButtonStyle","backgroundColor","this","context","isActive","borderColor","className","style","onClick","color","children","Component","contextType","defaultProps","Tool","name","renderProperties","PaletteColor","_inputRef","_allowClick","_input_OnChange_SetPaletteColor","event","paletteManager","setColor","colorID","target","value","_input_OnClick_SelectColorID","isSelectable","selectedColorID","preventDefault","isEditable","_input_OnDoubleClick_OpenMenu","current","click","_input_OnContextMenu_OpenMenu","createRef","paletteColorStyle","isSelected","ref","type","defaultValue","onChange","onDoubleClick","onContextMenu","PaletteAddColor","_paletteAddColor_OnClick_AddColor","addColor","Palette","_paletteManager_ColorChangeEmitter_ForceUpdate","forceUpdate","_paletteManager_SelectedColorIDChangeEmitter_ForceUpdate","colors","map","colorChangeEmitter","on","selectedColorIDChangeEmitter","off","FileTool","BrushTool","EraserTool","SettingsTool","SideMenu","activeToolKey","tools","toolButtons","tool","renderToolButton","activeTool","find","key","setState","Tile","transformOrigin","size","transform","position","x","y","rotation","width","height","viewBox","svg","fill","GridTiles","tiles","Vector2D","other","ids","Grid","_svg","_isDragging","_dragCursorOffset","_dragOffset","_tileKey","_svg_OnMouseWheel_Zoom","ctrlKey","originalEvent","wheelDelta","zoom","zoomMinimum","zoomMaximum","$window","$","window","add","offsetX","zoomOffsetMultiplier","offsetY","offset","copy","subtract","addZoom","_svg_OnMouseDown_StartDragging","button","nativeEvent","_document_OnMouseUp_StopDragging","_svg_OnMouseMove_Drag","_document_OnKeyDown_Hotkeys","offsetIncrement","gridSize","Math","min","gridSizeMaximum","max","gridSizeMinimum","zoomIncrement","_window_Resize_SetSize","prefix","windowSize","uniqueID","$1","divide","multiply","xmlns","preserveAspectRatio","onMouseDown","onMouseMove","renderDefs","renderGrid","id","patternUnits","stroke","strokeWidth","x1","y1","x2","y2","$document","document","$svg","zoomAdd","zoomMultiplier","floor","gridPosition","colorIndex","tileNode","concat","Event","Emitter","_callbacks","Map","onEmit","set","delete","tEvent","Array","from","keys","ColorChangeEvent","SelectedColorIDChangeEvent","PaletteManager","_selectedColorID","_defaultColor","length","selectedColorIDChangeEvent","emit","colorChangeEvent","App","_appContext","defaultPaletteColors","selectedTileset","tilesets","selectedTile","getTile","Provider","renderContent","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","default","_tiles","tileID","tile","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c90e039c.chunk.js","sourcesContent":["import ITheme from \"../ITheme\";\r\n\r\nconst themes: {[themeID: string]: ITheme} = {\r\n\tdark: {\r\n\t\tcolor1: \"#1a212d\",\r\n\t\tcolor2: \"#79c0ff\",\r\n\t\tcolor3: \"#1f2f46\"\r\n\t},\r\n\twhite: {\r\n\t\tcolor1: \"#999999\",\r\n\t\tcolor2: \"#000000\",\r\n\t\tcolor3: \"#f2f2f2\"\r\n\t}\r\n}\r\nexport default themes;","import React from \"react\";\r\nimport Theme from \"./ITheme\";\r\nimport themes from \"./data/themes\";\r\n\r\nexport interface IAppContext\r\n{\r\n\ttheme: Theme\r\n}\r\n\r\nconst AppContext = React.createContext({\r\n\ttheme: themes.dark\r\n});\r\nexport default AppContext;\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport \"./ToolButton.scss\";\r\n\r\nexport interface IProps {\r\n\tchildren: React.ReactNode;\r\n\tisActive: boolean;\r\n\tonClick: (event: React.MouseEvent) => void\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class ToolButton extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tpublic static defaultProps = {}\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\tconst toolButtonStyle: React.CSSProperties = {\r\n\t\t\tbackgroundColor: this.context.theme.color3\r\n\t\t}\r\n\r\n\t\tif(this.props.isActive)\r\n\t\t{\r\n\t\t\ttoolButtonStyle.borderColor = this.context.theme.color2;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<button className={`ToolButton ${this.props.isActive ? \"Active\" : \"\"}`} style={toolButtonStyle} onClick={this.props.onClick}>\r\n\t\t\t\t<div style={{color: this.context.theme.color2}}>\r\n\t\t\t\t\t{this.props.children}\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport AppContext from \"../../AppContext\";\r\nimport \"./Tool.scss\";\r\n\r\nexport interface IProps {\r\n\tname: string;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default abstract class Tool<P, S> extends React.Component<P & IProps, IState & S>\r\n{\r\n\tpublic static contextType = AppContext;\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div className=\"Tool\" style={{backgroundColor: this.context.theme.color3}}>\r\n\t\t\t\t<h1 className=\"Name\" style={{color: this.context.theme.color2}}>\r\n\t\t\t\t\t{this.props.name}\r\n\t\t\t\t</h1>\r\n\t\t\t\t{this.renderProperties()}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tpublic renderProperties(): React.ReactNode\r\n\t{\r\n\t\treturn <div className=\"Properties\"></div>;\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport PaletteManager from \"../PaletteManager\";\r\nimport \"./PaletteColor.scss\";\r\n\r\nexport interface IProps {\r\n\tpaletteManager: PaletteManager;\r\n\tcolorID: number;\r\n\tcolor: string;\r\n\tisEditable: boolean;\r\n\tisSelectable: boolean;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default abstract class PaletteColor extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tstatic defaultProps = {\r\n\t\tisEditable: true,\r\n\t\tisSelectable: true\r\n\t};\r\n\r\n\tprivate _inputRef: React.RefObject<HTMLInputElement>;\r\n\tprivate _allowClick: boolean = false;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\r\n\t\tthis._inputRef = React.createRef();\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\tconst paletteColorStyle: React.CSSProperties = {}\r\n\r\n\t\tif(this.props.isSelectable && this.isSelected())\r\n\t\t{\r\n\t\t\tpaletteColorStyle.backgroundColor = `${this.context.theme.color2}`;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"PaletteColor\" style={paletteColorStyle}>\r\n\t\t\t\t<input ref={this._inputRef} style={{backgroundColor: this.props.color, borderColor: this.context.theme.color1}} type=\"color\" defaultValue={this.props.color} onChange={this._input_OnChange_SetPaletteColor} onClick={this._input_OnClick_SelectColorID} onDoubleClick={this._input_OnDoubleClick_OpenMenu} onContextMenu={this._input_OnContextMenu_OpenMenu} />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tprivate _input_OnChange_SetPaletteColor = (event: React.ChangeEvent) =>\r\n\t{\r\n\t\tthis.props.paletteManager.setColor(this.props.colorID, (event.target as any).value);\r\n\t}\r\n\r\n\tprivate _input_OnClick_SelectColorID = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this.props.isSelectable)\r\n\t\t{\r\n\t\t\tthis.props.paletteManager.selectedColorID = this.props.colorID;\r\n\r\n\t\t\tif(this._allowClick)\r\n\t\t\t{\r\n\t\t\t\tthis._allowClick = false;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!this.props.isEditable)\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _input_OnDoubleClick_OpenMenu = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this.props.isEditable && this.props.isSelectable)\r\n\t\t{\r\n\t\t\tthis._allowClick = true;\r\n\t\t\tthis._inputRef.current?.click();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _input_OnContextMenu_OpenMenu = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this.props.isSelectable)\r\n\t\t{\r\n\t\t\tthis._allowClick = true;\r\n\t\t}\r\n\r\n\t\tthis._inputRef.current?.click();\r\n\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\tprivate isSelected(): boolean\r\n\t{\r\n\t\treturn this.props.paletteManager.selectedColorID === this.props.colorID;\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport PaletteManager from \"../PaletteManager\";\r\nimport \"./PaletteAddColor.scss\";\r\n\r\nexport interface IProps {\r\n\tpaletteManager: PaletteManager;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default abstract class PaletteAddColor extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<button className=\"PaletteAddColor\" style={{backgroundColor: this.context.theme.color1, borderColor: this.context.theme.color2}} onClick={this._paletteAddColor_OnClick_AddColor}>\r\n\t\t\t\t<div style={{color: this.context.theme.color2}}>\r\n\t\t\t\t\t+\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n\r\n\tprivate _paletteAddColor_OnClick_AddColor = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tthis.props.paletteManager.addColor();\r\n\t}\r\n\r\n}\r\n","import React from \"react\";\r\nimport PaletteColor from \"./PaletteColor\";\r\nimport PaletteAddColor from \"./PaletteAddColor\";\r\nimport AppContext from \"../AppContext\";\r\nimport PaletteManager, {ColorChangeEvent, SelectedColorIDChangeEvent} from \"../PaletteManager\";\r\nimport \"./Palette.scss\";\r\n\r\nexport interface IProps {\r\n\tpaletteManager: PaletteManager;\r\n\tisEditable: boolean;\r\n\tisSelectable: boolean;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default abstract class Palette extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tstatic defaultProps = {\r\n\t\tisEditable: true,\r\n\t\tisSelectable: true\r\n\t};\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div className=\"Palette\">\r\n\t\t\t\t{this.props.paletteManager.colors.map((color: string, colorID: number) => <PaletteColor key={colorID} paletteManager={this.props.paletteManager} colorID={colorID} color={color} isEditable={this.props.isEditable} isSelectable={this.props.isSelectable} />)}\r\n\t\t\t\t{this.props.isEditable ? <PaletteAddColor paletteManager={this.props.paletteManager} /> : null}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tpublic componentDidMount(): void\r\n\t{\r\n\t\tthis.props.paletteManager.colorChangeEmitter.on(this._paletteManager_ColorChangeEmitter_ForceUpdate);\r\n\t\tthis.props.paletteManager.selectedColorIDChangeEmitter.on(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate);\r\n\t}\r\n\r\n\tpublic componentWillUnmount(): void\r\n\t{\r\n\t\tthis.props.paletteManager.colorChangeEmitter.off(this._paletteManager_ColorChangeEmitter_ForceUpdate);\r\n\t\tthis.props.paletteManager.selectedColorIDChangeEmitter.off(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate);\r\n\t}\r\n\r\n\t_paletteManager_ColorChangeEmitter_ForceUpdate = (event: ColorChangeEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\t_paletteManager_SelectedColorIDChangeEmitter_ForceUpdate = (event: SelectedColorIDChangeEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n}\r\n","import Tool, {IProps as IToolProps, IState as IToolState} from \"./Tool\";\r\nimport Palette from \"../Palette\";\r\nimport PaletteManager from \"../../PaletteManager\";\r\n\r\nexport interface IProps extends IToolProps\r\n{\r\n\tpaletteManager: PaletteManager;\r\n}\r\n\r\nexport interface IState extends IToolState {}\r\n\r\nexport default class FileTool extends Tool<IProps, IState>\r\n{\r\n\tpublic static defaultProps = {\r\n\t\tname: \"File\"\r\n\t};\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic renderProperties(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div className=\"Properties\">\r\n\t\t\t\t<Palette paletteManager={this.props.paletteManager} isEditable={true} isSelectable={false} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import Tool, {IProps as IToolProps, IState as IToolState} from \"./Tool\";\r\nimport Palette from \"../Palette\";\r\nimport PaletteManager from \"../../PaletteManager\";\r\n\r\nexport interface IProps extends IToolProps\r\n{\r\n\tpaletteManager: PaletteManager;\r\n}\r\n\r\nexport interface IState extends IToolState {}\r\n\r\nexport default class BrushTool extends Tool<IProps, IState>\r\n{\r\n\tpublic static defaultProps = {\r\n\t\tname: \"Brush Tool\"\r\n\t};\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic renderProperties(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div className=\"Properties\">\r\n\t\t\t\t<Palette paletteManager={this.props.paletteManager} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import Tool, {IProps as IToolProps, IState as IToolState} from \"./Tool\";\r\n\r\nexport default class EraserTool extends Tool<IToolProps, IToolState>\r\n{\r\n\tpublic static defaultProps = {\r\n\t\tname: \"Eraser Tool\"\r\n\t};\r\n\r\n\tpublic constructor(props: IToolProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n}\r\n","import Tool, {IProps as IToolProps, IState as IToolState} from \"./Tool\";\r\n\r\nexport default class SettingsTool extends Tool<IToolProps, IToolState>\r\n{\r\n\tpublic static defaultProps = {\r\n\t\tname: \"Settings\"\r\n\t};\r\n\r\n\tpublic constructor(props: IToolProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ToolButton from \"./ToolButton\";\r\nimport {IProps as IToolProps} from \"./Tools/Tool\";\r\nimport FileTool from \"./Tools/FileTool\";\r\nimport BrushTool from \"./Tools/BrushTool\";\r\nimport EraserTool from \"./Tools/EraserTool\";\r\nimport SettingsTool from \"./Tools/SettingsTool\";\r\nimport \"./SideMenu.scss\";\r\nimport AppContext from \"../AppContext\";\r\nimport PaletteManager from \"../PaletteManager\";\r\n\r\nexport interface IProps {\r\n\tpaletteManager: PaletteManager;\r\n}\r\n\r\nexport interface IState {\r\n\tactiveToolKey: string;\r\n}\r\n\r\nexport default class SideMenu extends React.Component<IProps, IState>\r\n{\r\n\tpublic static contextType = AppContext;\r\n\tpublic static defaultProps = {};\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tactiveToolKey: \"brushTool\"\r\n\t\t};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\tconst tools: React.ReactNode[] = [\r\n\t\t\t<FileTool key=\"fileTool\" paletteManager={this.props.paletteManager} />,\r\n\t\t\t<BrushTool key=\"brushTool\" paletteManager={this.props.paletteManager} />,\r\n\t\t\t<EraserTool key=\"eraserTool\" />,\r\n\t\t\t<SettingsTool key=\"settingsTool\" />\r\n\t\t];\r\n\t\tconst toolButtons: React.ReactNode[] = tools.map((tool: React.ReactNode) => this.renderToolButton(tool));\r\n\t\tconst activeTool: React.ReactNode = tools.find((tool: React.ReactNode) => this.state.activeToolKey === (tool as JSX.Element).key);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"SideMenu\" style={{backgroundColor: this.context.theme.color1}}>\r\n\t\t\t\t<div className=\"ToolButtons\">\r\n\t\t\t\t\t{toolButtons}\r\n\t\t\t\t</div>\r\n\t\t\t\t{activeTool}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tpublic renderToolButton(tool: React.ReactNode): React.ReactNode\r\n\t{\r\n\t\tconst key: string = (tool as JSX.Element).key as string;\r\n\t\tconst name: string = ((tool as JSX.Element).props as IToolProps).name;\r\n\r\n\t\treturn (\r\n\t\t\t<ToolButton key={`${key}Button`} isActive={this.state.activeToolKey === key} onClick={() => this.setState({activeToolKey: key})}>\r\n\t\t\t\t{name}\r\n\t\t\t</ToolButton>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport Vector2D from \"../Vector2D\";\r\n\r\nexport interface IProps {\r\n\tsvg: React.ReactNode;\r\n\tposition: Vector2D;\r\n\tsize: number;\r\n\trotation: number;\r\n\tcolor: string;\r\n\tcolorIndex: number;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class Tile extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\r\n\tconstructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {}\r\n\t}\r\n\r\n\trender(): React.ReactNode\r\n\t{\r\n\t\tconst style = {\r\n\t\t\ttransformOrigin: `${this.props.size / 2}px ${this.props.size / 2}px`,\r\n\t\t\ttransform: `translate(${this.props.position.x}px, ${this.props.position.y}px) rotate(${this.props.rotation * 90}deg)`\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<g className=\"Tile\" width={`${this.props.size}px`} height={`${this.props.size}px`} viewBox={`0,0 ${this.props.size},${this.props.size}`} style={style}>\r\n\t\t\t\t{this.props.svg}\r\n\t\t\t\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width={`${this.props.size}px`} height={`${this.props.size}px`} fill=\"none\" />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\n\r\nexport interface IProps {\r\n\ttiles: React.ReactNode[]\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class GridTiles extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tpublic static defaultProps = {}\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\r\n\t\t};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<g className=\"GridTiles\">\r\n\t\t\t\t{this.props.tiles}\r\n\t\t\t</g>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n/*\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(0px, 0px) rotate(0deg)\"}}>\r\n\t<rect width=\"32px\" height=\"32px\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(32px, 0px) rotate(0deg)\"}}>\r\n\t<rect width=\"32px\" height=\"32px\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(0px, 32px) rotate(0deg)\"}}>\r\n\t<rect width=\"32px\" height=\"32px\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(32px, 32px) rotate(0deg)\"}}>\r\n\t<circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n*/\r\n","\r\nexport default class Vector2D\r\n{\r\n\tx: number;\r\n\ty: number;\r\n\r\n\tconstructor(x: number, y: number)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tadd(other: Vector2D): Vector2D;\r\n\tadd(other: number): Vector2D;\r\n\tadd(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x += other;\r\n\t\t\tthis.y += other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x += other.x;\r\n\t\t\tthis.y += other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsubtract(other: Vector2D): Vector2D\r\n\tsubtract(other: number): Vector2D\r\n\tsubtract(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x -= other;\r\n\t\t\tthis.y -= other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x -= other.x;\r\n\t\t\tthis.y -= other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tmultiply(other: Vector2D): Vector2D;\r\n\tmultiply(other: number): Vector2D;\r\n\tmultiply(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x *= other;\r\n\t\t\tthis.y *= other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x *= other.x;\r\n\t\t\tthis.y *= other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdivide(other: Vector2D): Vector2D;\r\n\tdivide(other: number): Vector2D;\r\n\tdivide(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x /= other;\r\n\t\t\tthis.y /= other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x /= other.x;\r\n\t\t\tthis.y /= other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tequal(other: Vector2D): boolean\r\n\t{\r\n\t\treturn this.x === other.x && this.y === other.y;\r\n\t}\r\n\r\n\tcopy(): Vector2D\r\n\t{\r\n\t\treturn new Vector2D(this.x, this.y);\r\n\t}\r\n}\r\n","\r\nexport function isPowerOfTwo(x: number): boolean\r\n{\r\n\treturn (Math.log(x) / Math.log(2)) % 1 === 0;\r\n}\r\n\r\nlet ids: {[prefix: string]: number} = {};\r\nexport function generateUniqueID(prefix: string): string\r\n{\r\n\tif(!(prefix in ids))\r\n\t{\r\n\t\tids[prefix] = 0;\r\n\t}\r\n\r\n    return `${prefix}${ids[prefix]++}`;\r\n}\r\n\r\nexport function clamp(value: number, min: number, max: number): number\r\n{\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n","import React from \"react\";\r\nimport Tile from \"./Tile\";\r\nimport GridTiles from \"./GridTiles\";\r\nimport AppContext from \"../AppContext\";\r\nimport Vector2D from \"../Vector2D\";\r\nimport {generateUniqueID, clamp} from \"../util\";\r\nimport \"./Grid.scss\";\r\nimport $ from \"jquery\";\r\n\r\nexport interface IProps {\r\n\toffsetIncrement: number;\r\n\tzoomIncrement: number;\r\n\tzoomMultiplier: number;\r\n\tzoomOffsetMultiplier: number;\r\n\tzoomMinimum: number,\r\n\tzoomMaximum: number,\r\n\tgridSizeMinimum: number;\r\n\tgridSizeMaximum: number;\r\n}\r\n\r\nexport interface IState {\r\n\tuniqueID: string;\r\n\tgridSize: number;\r\n\tzoom: number;\r\n\toffset: Vector2D;\r\n\tsize: Vector2D;\r\n\ttiles: React.ReactNode[];\r\n\tcolor1: string;\r\n\tcolor2: string;\r\n}\r\n\r\nexport default class Grid extends React.Component<IProps, IState>\r\n{\r\n\tpublic static contextType = AppContext;\r\n\tpublic static defaultProps = {\r\n\t\toffsetIncrement: 32,\r\n\t\tzoomIncrement: 120,\r\n\t\tzoomMultiplier: 0.002,\r\n\t\tzoomOffsetMultiplier: 0.24,\r\n\t\tzoomMinimum: 0.064,\r\n\t\tzoomMaximum: 4,\r\n\t\tgridSizeMinimum: 2,\r\n\t\tgridSizeMaximum: 128\r\n\t}\r\n\r\n\tprivate _svg: React.RefObject<SVGSVGElement>;\r\n\tprivate _isDragging: boolean = false;\r\n\tprivate _dragCursorOffset: Vector2D = new Vector2D(0, 0);\r\n\tprivate _dragOffset: Vector2D = new Vector2D(0, 0);\r\n\tprivate _tileKey: number = 0;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\t\tconst windowSize: Vector2D = new Vector2D($window.width()!,  $window.height()!);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuniqueID: generateUniqueID(\"grid\"),\r\n\t\t\tgridSize: 32,\r\n\t\t\tzoom: 1,\r\n\t\t\toffset: new Vector2D(0, 0),\r\n\t\t\tsize: windowSize,\r\n\t\t\ttiles: [],\r\n\t\t\tcolor1: \"#202124\",\r\n\t\t\tcolor2: \"#303136\"\r\n\t\t};\r\n\r\n\t\tthis._svg = React.createRef();\r\n\r\n\t\t(window as any).$1 = this;\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\tconst offset: Vector2D = this.state.offset.copy().add(this.state.size.copy().divide(2).multiply(this.state.zoom));\r\n\t\tconst size: Vector2D = this.state.size.copy().multiply(this.state.zoom);\r\n\r\n\t\treturn (\r\n\t\t\t<svg className=\"Grid\" ref={this._svg} xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"xMinYMin\" width={`${this.state.size.x}px`} height={`${this.state.size.y}px`} viewBox={`${-offset.x},${-offset.y} ${size.x},${size.y}`} onMouseDown={this._svg_OnMouseDown_StartDragging} onMouseMove={this._svg_OnMouseMove_Drag}>\r\n\t\t\t\t{this.renderDefs()}\r\n\t\t\t\t{this.renderGrid(offset, size)}\r\n\t\t\t\t<GridTiles tiles={this.state.tiles} />\r\n\t\t\t</svg>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderDefs(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<defs>\r\n\t\t\t\t<pattern id={`${this.state.uniqueID}_pattern1`} width={this.state.gridSize} height={this.state.gridSize} patternUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t<rect width={`${this.state.gridSize}px`} height={`${this.state.gridSize}px`} fill=\"none\" stroke={this.state.color1} strokeWidth=\"1\" />\r\n\t\t\t\t</pattern>\r\n\t\t\t\t<pattern id={`${this.state.uniqueID}_pattern2`} width={`${this.props.gridSizeMaximum}px`} height={`${this.props.gridSizeMaximum}px`} patternUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t<rect width={`${this.props.gridSizeMaximum}px`} height={`${this.props.gridSizeMaximum}px`} fill={`url(#${this.state.uniqueID}_pattern1)`} />\r\n\t\t\t\t\t<rect width={`${this.props.gridSizeMaximum}px`} height={`${this.props.gridSizeMaximum}px`} fill=\"none\" stroke={this.state.color1} strokeWidth=\"3\" />\r\n\t\t\t\t</pattern>\r\n\t\t\t</defs>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderGrid(offset: Vector2D, size: Vector2D): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<rect id={`${this.state.uniqueID}_rect1`} x={`${-offset.x}px`} y={`${-offset.y}px`} width=\"100%\" height=\"100%\" fill={`url(#${this.state.uniqueID}_pattern2)`} />\r\n\t\t\t\t<line id={`${this.state.uniqueID}_line1`} x1={`${-offset.x}px`} y1=\"0\" x2={`${-offset.x + size.x}px`} y2=\"0\" stroke={this.state.color2} strokeWidth=\"3\" />\r\n\t\t\t\t<line id={`${this.state.uniqueID}_line2`} x1=\"0\" y1={`${-offset.y}px`} x2=\"0\" y2={`${-offset.y + size.y}px`} stroke={this.state.color2} strokeWidth=\"3\" />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic componentDidMount(): void\r\n\t{\r\n\t\tconst $document: JQuery<Document> = $(document);\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\t\tconst $svg: JQuery<SVGSVGElement> = $(this._svg.current!);\r\n\r\n\t\t$document.on(\"mouseup\", this._document_OnMouseUp_StopDragging);\r\n\t\t$document.on(\"keydown\", this._document_OnKeyDown_Hotkeys);\r\n\t\t$window.on(\"resize\", this._window_Resize_SetSize);\r\n\t\t$svg.on(\"mousewheel\", this._svg_OnMouseWheel_Zoom);\r\n\t}\r\n\r\n\tpublic componentWillUnmount(): void\r\n\t{\r\n\t\tconst $document: JQuery<Document> = $(document);\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\t\tconst $svg: JQuery<SVGSVGElement> = $(this._svg.current!);\r\n\r\n\t\t$document.off(\"mouseup\", this._document_OnMouseUp_StopDragging);\r\n\t\t$document.off(\"keydown\", this._document_OnKeyDown_Hotkeys);\r\n\t\t$window.off(\"resize\", this._window_Resize_SetSize);\r\n\t\t$svg.off(\"mousewheel\", this._svg_OnMouseWheel_Zoom);\r\n\t}\r\n\r\n\tpublic addZoom(zoomAdd: number): void\r\n\t{\r\n\t\tthis.setState({\r\n\t\t\tzoom: clamp(this.state.zoom - zoomAdd * this.state.zoom * this.props.zoomMultiplier, this.props.zoomMinimum, this.props.zoomMaximum)\r\n\t\t});\r\n\t}\r\n\r\n\tpublic positionToGrid(position: Vector2D): Vector2D\r\n\t{\r\n\t\treturn new Vector2D(\r\n\t\t\tMath.floor(position.x / this.state.gridSize),\r\n\t\t\tMath.floor(position.y / this.state.gridSize)\r\n\t\t)\r\n\t}\r\n\r\n\tpublic gridToPosition(gridPosition: Vector2D): Vector2D\r\n\t{\r\n\t\treturn gridPosition.copy().multiply(this.state.gridSize);\r\n\t}\r\n\r\n\tprivate _svg_OnMouseWheel_Zoom = (event: any) =>\r\n\t{\r\n\t\tif(event.ctrlKey)\r\n\t\t{\r\n\t\t\tif((event.originalEvent.wheelDelta > 0 && this.state.zoom > this.props.zoomMinimum) || (event.originalEvent.wheelDelta < 0 && this.state.zoom < this.props.zoomMaximum))\r\n\t\t\t{\r\n\t\t\t\tconst $window = $(window);\r\n\t\t\t\tconst add = new Vector2D(\r\n\t\t\t\t\t(event.offsetX - ($window.width()! / 2)) * this.state.zoom * this.props.zoomOffsetMultiplier,\r\n\t\t\t\t\t(event.offsetY - ($window.height()! / 2)) * this.state.zoom * this.props.zoomOffsetMultiplier\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: event.originalEvent.wheelDelta > 0 ? this.state.offset.copy().subtract(add) : this.state.offset.copy().add(add)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.addZoom(event.originalEvent.wheelDelta);\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _svg_OnMouseDown_StartDragging = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tswitch(event.button)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tthis._dragOffset.x = this.state.offset.x;\r\n\t\t\t\tthis._dragOffset.y = this.state.offset.y;\r\n\t\t\t\tthis._dragCursorOffset.x = event.nativeEvent.offsetX;\r\n\t\t\t\tthis._dragCursorOffset.y = event.nativeEvent.offsetY;\r\n\t\t\t\tthis._isDragging = true;\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _document_OnMouseUp_StopDragging = (event: JQuery.MouseUpEvent) =>\r\n\t{\r\n\t\tthis._isDragging = false;\r\n\t}\r\n\r\n\tprivate _svg_OnMouseMove_Drag = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this._isDragging)\r\n\t\t{\r\n\t\t\tthis.setState({\r\n\t\t\t\toffset: new Vector2D(\r\n\t\t\t\t\tthis._dragOffset.x + (event.nativeEvent.offsetX - this._dragCursorOffset.x) * this.state.zoom,\r\n\t\t\t\t\tthis._dragOffset.y + (event.nativeEvent.offsetY - this._dragCursorOffset.y) * this.state.zoom\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _document_OnKeyDown_Hotkeys = (event: JQuery.KeyDownEvent) =>\r\n\t{\r\n\t\tswitch(event.key)\r\n\t\t{\r\n\t\t\tcase \"ArrowLeft\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x + this.props.offsetIncrement, this.state.offset.y)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"ArrowUp\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x, this.state.offset.y + this.props.offsetIncrement)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"ArrowRight\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x - this.props.offsetIncrement, this.state.offset.y)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"ArrowDown\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x, this.state.offset.y - this.props.offsetIncrement)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"w\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tgridSize: Math.min(this.state.gridSize * 2, this.props.gridSizeMaximum)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"s\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tgridSize: Math.max(this.state.gridSize / 2, this.props.gridSizeMinimum)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"+\":\r\n\t\t\t\tif(event.ctrlKey)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.addZoom(this.props.zoomIncrement);\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"-\":\r\n\t\t\t\tif(event.ctrlKey)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.addZoom(-this.props.zoomIncrement);\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _window_Resize_SetSize = (event: JQuery.ResizeEvent) =>\r\n\t{\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\r\n\t\tthis.setState({\r\n\t\t\tsize: new Vector2D($window.width()!, $window.height()!)\r\n\t\t});\r\n\t}\r\n\r\n\tplaceTile(svg: React.ReactNode, position: Vector2D, size: number, rotation: number, color: string, colorIndex: number): React.ReactNode\r\n\t{\r\n\t\tconst tileNode: React.ReactNode = <Tile key={this._tileKey++} svg={svg} position={position} size={size} rotation={rotation} color={color} colorIndex={colorIndex} />;\r\n\r\n\t\tthis.setState({\r\n\t\t\ttiles: this.state.tiles.concat(tileNode)\r\n\t\t});\r\n\r\n\t\treturn tileNode;\r\n\t}\r\n\r\n\t/*\r\n\tupdateColor(colorIndex, color)\r\n\t{\r\n\t\tthis.html.find(`> g[color-index=\"${colorIndex}\"] > :not(.tile-pointer)`).attr(\"fill\", color);\r\n\t}\r\n\r\n\tcursorToView(cursorPosition)\r\n\t{\r\n\t\treturn new Vector2D(\r\n\t\t\t(cursorPosition.x - this.offset.x) * (this.zoom / this.html.width()),\r\n\t\t\t(cursorPosition.y - this.offset.y) * (this.zoom / this.html.height())\r\n\t\t);\r\n\t}\r\n\t*/\r\n}","\r\nexport class Event {}\r\n\r\nexport interface Callback<T>\r\n{\r\n\t(event: T): void;\r\n}\r\n\r\nexport default class Emitter<T extends Event = Event>\r\n{\r\n\t_callbacks: Map<Callback<T>, boolean> = new Map<Callback<T>, boolean>();\r\n\r\n\ton(onEmit: Callback<T>): void\r\n\t{\r\n\t\tthis._callbacks.set(onEmit, true);\r\n\t}\r\n\r\n\toff(onEmit: Callback<T>): void\r\n\t{\r\n\t\tthis._callbacks.delete(onEmit);\r\n\t}\r\n\r\n\tonce(onEmit: Callback<T>): void\r\n\t{\r\n\t\tthis.on((event: T) =>\r\n\t\t{\r\n\t\t\tonEmit(event);\r\n\t\t\tthis.off(onEmit);\r\n\t\t});\r\n\t}\r\n\r\n\temit(event?: Event): T\r\n\t{\r\n\t\tif(typeof event === \"undefined\")\r\n\t\t{\r\n\t\t\tevent = new Event();\r\n\t\t}\r\n\r\n\t\tconst tEvent: T = event as T;\r\n\r\n\t\tfor(const onEmit of Array.from(this._callbacks.keys()))\r\n\t\t{\r\n\t\t\tonEmit(tEvent);\r\n\t\t}\r\n\r\n\t\treturn tEvent;\r\n\t}\r\n}\r\n","import Emitter, {Event} from \"./Emitter\";\r\n\r\nexport class ColorChangeEvent extends Event\r\n{\r\n\tcolorID: number;\r\n\tcolor: string;\r\n\r\n\tconstructor(colorID: number, color: string)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.colorID = colorID;\r\n\t\tthis.color = color;\r\n\t}\r\n}\r\n\r\nexport class SelectedColorIDChangeEvent extends Event\r\n{\r\n\tselectedColorID: number;\r\n\r\n\tconstructor(selectedColorID: number)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.selectedColorID = selectedColorID;\r\n\t}\r\n}\r\n\r\nexport default class PaletteManager\r\n{\r\n\tpublic colors: string[];\r\n\tpublic colorChangeEmitter: Emitter<ColorChangeEvent> = new Emitter<ColorChangeEvent>();\r\n\tpublic selectedColorIDChangeEmitter: Emitter<SelectedColorIDChangeEvent> = new Emitter<SelectedColorIDChangeEvent>();\r\n\tprivate _selectedColorID: number = 0;\r\n\tprivate _defaultColor: string = \"#ffffff\";\r\n\r\n\tset selectedColorID(colorID: number)\r\n\t{\r\n\t\tconst selectedColorIDChangeEvent = this.selectedColorIDChangeEmitter.emit(new SelectedColorIDChangeEvent(colorID));\r\n\t\tthis._selectedColorID = selectedColorIDChangeEvent.selectedColorID;\r\n\t}\r\n\r\n\tget selectedColorID()\r\n\t{\r\n\t\treturn this._selectedColorID;\r\n\t}\r\n\r\n\tget selectedColor()\r\n\t{\r\n\t\treturn this.colors[this.selectedColorID];\r\n\t}\r\n\r\n\tconstructor(colors: string[] = [])\r\n\t{\r\n\t\tthis.colors = colors;\r\n\r\n\t\tif(this.colors.length === 0)\r\n\t\t{\r\n\t\t\tthis.addColor();\r\n\t\t}\r\n\t}\r\n\r\n\taddColor()\r\n\t{\r\n\t\tthis.setColor(this.colors.length, this._defaultColor);\r\n\t}\r\n\r\n\tsetColor(colorID: number, color: string)\r\n\t{\r\n\t\tconst colorChangeEvent = this.colorChangeEmitter.emit(new ColorChangeEvent(colorID, color));\r\n\t\tthis.colors[colorChangeEvent.colorID] = colorChangeEvent.color;\r\n\t}\r\n}\r\n","import React from \"react\";\nimport SideMenu from \"./SideMenu\";\nimport Grid from \"./Grid\";\nimport Tile from \"./Tile\";\nimport Tileset from \"../Tileset\";\nimport PaletteManager from \"../PaletteManager\";\nimport AppContext, {IAppContext} from \"../AppContext\";\nimport ITheme from \"../ITheme\";\nimport \"./App.scss\";\n\nexport interface IProps {\n\tthemes: {[themeID: string]: ITheme};\n\ttilesets: {[tilesetID: string]: Tileset};\n\tdefaultPaletteColors: string[];\n}\n\nexport interface IState {\n\tpaletteManager: PaletteManager;\n\tselectedTileset: Tileset;\n\tselectedTile: Tile;\n}\n\nexport default class App extends React.Component<IProps, IState>\n{\n\tprivate _appContext: IAppContext;\n\n\tconstructor(props: IProps)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpaletteManager: new PaletteManager(this.props.defaultPaletteColors),\n\t\t\tselectedTileset: props.tilesets[\"default\"],\n\t\t\tselectedTile: props.tilesets[\"default\"].getTile(\"tile1\")\n\t\t};\n\n\t\tthis._appContext = {\n\t\t\ttheme: this.props.themes.dark\n\t\t}\n\t}\n\n\trender(): React.ReactNode\n\t{\n\t\treturn (\n\t\t\t<AppContext.Provider value={this._appContext}>\n\t\t\t\t<div className=\"App\">\n\t\t\t\t\t{this.renderContent()}\n\t\t\t\t\t<SideMenu paletteManager={this.state.paletteManager} />\n\t\t\t\t</div>\n\t\t\t</AppContext.Provider>\n\t\t);\n\t}\n\n\trenderContent(): React.ReactNode\n\t{\n\t\treturn (\n\t\t\t<div className=\"Content\">\n\t\t\t\t<Grid />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import Tileset from \"../Tileset\";\r\n\r\nconst tilesets = {\r\n\tdefault: new Tileset(\"default\")\r\n};\r\nexport default tilesets;\r\n","import Tile from \"./Components/Tile\";\r\n\r\nexport default class Tileset\r\n{\r\n\tname: string;\r\n\t_tiles: {[key: string]: Tile};\r\n\r\n\tget tiles()\r\n\t{\r\n\t\treturn this._tiles;\r\n\t}\r\n\r\n\tconstructor(name: string)\r\n\t{\r\n\t\tthis.name = name;\r\n\t\tthis._tiles = {};\r\n\t}\r\n\r\n\tsetTile(tileID: string, tile: Tile)\r\n\t{\r\n\t\tthis._tiles[tileID] = tile;\r\n\t}\r\n\r\n\tgetTile(tileID: string)\r\n\t{\r\n\t\treturn this._tiles[tileID];\r\n\t}\r\n}\r\n","\r\nconst defaultPaletteColors = [\r\n\t\"#ffffff\",\r\n\t\"#cccccc\",\r\n\t\"#000000\",\r\n\t\"#333333\",\r\n\t\"#925c3a\",\r\n\t\"#784f35\",\r\n\t\"#dc6d1c\",\r\n\t\"#f4dd42\",\r\n\t\"#b23434\",\r\n\t\"#631d1d\",\r\n\t\"#81b93b\",\r\n\t\"#4d893a\",\r\n\t\"#5e81ca\",\r\n\t\"#343d65\",\r\n\t\"#cc00ff\",\r\n\t\"#8f00b3\",\r\n\t\"#ffb3ff\"\r\n];\r\nexport default defaultPaletteColors;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./Components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./index.scss\";\nimport themes from \"./data/themes\";\nimport tilesets from \"./data/tilesets\";\nimport defaultPaletteColors from \"./data/defaultPaletteColors\";\n\nReactDOM.render(\n\t(\n\t\t<React.StrictMode>\n\t\t\t<App themes={themes} tilesets={tilesets} defaultPaletteColors={defaultPaletteColors} />\n\t\t</React.StrictMode>\n\t),\n\tdocument.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}