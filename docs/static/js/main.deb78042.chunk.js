(this["webpackJsonppixel-tiler"]=this["webpackJsonppixel-tiler"]||[]).push([[0],{70:function(t,e,o){"use strict";o.r(e);var n=o(0),i=o.n(n),r=o(13),a=o.n(r),s=o(3),c=o(5),l=o(7),p=o(6),u=o(18),h=o.n(u),d=o(51),f=o(96),m=Object(d.a)();m=Object(f.a)(m);var j=i.a.createContext({theme:m}),b=o(97),g=o(93),x=o(94),v=o(92),O=o(15);var y={};function _(t,e){return e?t:""}var C=o(1),w=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t)).state={},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)(g.a,{title:this.props.text,enterDelay:o.tooltipEnterDelay,children:Object(C.jsx)(x.a,{className:"".concat(this.props.classes.root," ToolButton ").concat(_("Active",this.props.isActive)),onClick:this.props.onClick,children:Object(C.jsx)(v.a,{children:this.props.children})})})}}]),o}(i.a.Component);w.contextType=j,w.tooltipEnterDelay=700;var M=Object(O.a)((function(){return Object(b.a)({root:{paddingTop:"100% !important","&.Active":{border:"2px solid",borderColor:"var(--theme-secondary-main)","&:hover":{borderColor:"var(--theme-secondary-main)"}},"&:hover":{border:"2px solid var(--theme-secondary-dark)"},"& div":{display:"flex",position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",justifyContent:"center",alignItems:"center",backgroundColor:"var(--theme-primary-main)","&:hover":{backgroundColor:"var(--theme-primary-dark)"}}}})}))(w),k=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t))._inputRef=void 0,n._allowClick=!1,n._input_OnChange_SetPaletteColor=function(t){n.props.paletteManager.setColor(n.props.colorID,t.target.value)},n._input_OnClick_SelectColorID=function(t){n.props.isSelectable&&(n.props.paletteManager.selectedColorID=n.props.colorID,n._allowClick?n._allowClick=!1:t.preventDefault()),n.props.isEditable||(t.preventDefault(),t.preventDefault())},n._input_OnDoubleClick_OpenMenu=function(t){var e;n.props.isEditable&&n.props.isSelectable&&(n._allowClick=!0,null===(e=n._inputRef.current)||void 0===e||e.click())},n._input_OnContextMenu_OpenMenu=function(t){var e;n.props.isSelectable&&(n._allowClick=!0),null===(e=n._inputRef.current)||void 0===e||e.click(),t.preventDefault()},n.state={},n._inputRef=i.a.createRef(),n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)("div",{className:"".concat(this.props.classes.root," PaletteColor ").concat(_("Selectable",this.props.isSelectable)," ").concat(_("Editable",this.props.isEditable)," ").concat(_("Active",this.isSelected())),children:Object(C.jsx)("div",{children:Object(C.jsx)(x.a,{children:Object(C.jsx)("input",{ref:this._inputRef,style:{backgroundColor:this.props.color},type:"color",defaultValue:this.props.color,onChange:this._input_OnChange_SetPaletteColor,onClick:this._input_OnClick_SelectColorID,onDoubleClick:this._input_OnDoubleClick_OpenMenu,onContextMenu:this._input_OnContextMenu_OpenMenu})})})})}},{key:"isSelected",value:function(){return this.props.paletteManager.selectedColorID===this.props.colorID}}]),o}(i.a.Component);k.contextType=j,k.defaultProps={isEditable:!0,isSelectable:!0};var D=Object(O.a)((function(){return Object(b.a)({root:{width:"calc(100% - 4px)",height:"calc(100% - 4px)",padding:"2px",margin:"0px","&.Selectable":{"&.Active":{backgroundColor:"var(--theme-secondary-main)"},"& > div > button > input":{cursor:"pointer"}},"&.Editable > div > button > input":{cursor:"pointer"},"& > div":{width:"calc(100%)","& > button":{position:"relative",left:"0px",width:"calc(100%)","& > input":{width:"calc(100%)",height:"4px",margin:"0px",padding:"calc(100% - 8px) 0px 0px 0px",cursor:"initial",border:"2px solid var(--theme-primary-dark)"}}}}})}))(k),S=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t))._paletteAddColor_OnClick_AddColor=function(t){n.props.paletteManager.addColor()},n.state={},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)(g.a,{title:this.props.text,enterDelay:o.tooltipEnterDelay,children:Object(C.jsx)(x.a,{className:"".concat(this.props.classes.root," PaletteAddColor"),onClick:this._paletteAddColor_OnClick_AddColor,children:Object(C.jsx)("div",{children:"+"})})})}}]),o}(i.a.Component);S.contextType=j,S.defaultProps={text:"Add Color"},S.tooltipEnterDelay=700;var z=Object(O.a)((function(){return Object(b.a)({root:{position:"relative",left:"2px",top:"2px",width:"calc(100% - 4px)",height:"0px",padding:"0px",paddingTop:"calc(100% - 8px)",margin:"0px",marginBottom:"4px",border:"2px solid",cursor:"pointer",backgroundColor:"var(--theme-primary-dark)",borderColor:"var(--theme-secondary-main)","&:hover":{backgroundColor:"var(--theme-primary-main)"},"& div":{display:"flex",position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",justifyContent:"center",alignItems:"center",fontSize:"31px",color:"var(--theme-secondary-main)"}}})}))(S),I=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t))._paletteManager_ColorChangeEmitter_ForceUpdate=function(t){n.forceUpdate()},n._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate=function(t){n.forceUpdate()},n.state={},n}return Object(c.a)(o,[{key:"render",value:function(){var t=this;return Object(C.jsxs)(v.a,{className:"".concat(this.props.classes.root," Palette"),children:[this.props.paletteManager.colors.map((function(e,o){return Object(C.jsx)(D,{paletteManager:t.props.paletteManager,colorID:o,color:e,isEditable:t.props.isEditable,isSelectable:t.props.isSelectable},o)})),this.props.isEditable?Object(C.jsx)(z,{paletteManager:this.props.paletteManager}):null]})}},{key:"componentDidMount",value:function(){this.props.paletteManager.colorChangeEmitter.on(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.on(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate)}},{key:"componentWillUnmount",value:function(){this.props.paletteManager.colorChangeEmitter.off(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.off(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate)}}]),o}(i.a.Component);I.contextType=j,I.defaultProps={isEditable:!0,isSelectable:!0};var E=Object(O.a)((function(){return Object(b.a)({root:{display:"grid",gridTemplateColumns:"repeat(6, auto)",gap:"0px",margin:"2px"}})}))(I),T=o(85),A=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t)).state={},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsxs)(v.a,{className:"".concat(this.props.classes.root," Tool"),bgcolor:"primary.main",children:[Object(C.jsx)(v.a,{mt:1,mb:1,children:Object(C.jsx)(T.a,{className:"Name",color:"textPrimary",variant:"h5",children:this.props.name})}),Object(C.jsx)(v.a,{className:"Properties",children:this.props.children})]})}}]),o}(i.a.Component);A.contextType=j;var L=Object(O.a)((function(){return Object(b.a)({root:{height:"100%",margin:"0px 4px 0px 4px",overflow:"auto"}})}))(A),U=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t)).state={},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)(L,{name:this.props.name,icon:this.props.icon,children:Object(C.jsx)(E,{paletteManager:this.props.paletteManager,isEditable:!0,isSelectable:!1})})}}]),o}(i.a.Component),P=function t(e,o,n,i,r,a){Object(s.a)(this,t),this.tileType=void 0,this.position=void 0,this.size=void 0,this.rotation=void 0,this.color=void 0,this.colorID=void 0,this.tileType=e,this.position=o,this.size=n,this.rotation=i,this.color=r,this.colorID=a},F=function(){function t(e,o){Object(s.a)(this,t),this.x=void 0,this.y=void 0,this.x=e,this.y=o}return Object(c.a)(t,[{key:"add",value:function(e){return"number"===typeof e?(this.x+=e,this.y+=e):e instanceof t&&(this.x+=e.x,this.y+=e.y),this}},{key:"subtract",value:function(e){return"number"===typeof e?(this.x-=e,this.y-=e):e instanceof t&&(this.x-=e.x,this.y-=e.y),this}},{key:"multiply",value:function(e){return"number"===typeof e?(this.x*=e,this.y*=e):e instanceof t&&(this.x*=e.x,this.y*=e.y),this}},{key:"divide",value:function(e){return"number"===typeof e?(this.x/=e,this.y/=e):e instanceof t&&(this.x/=e.x,this.y/=e.y),this}},{key:"equal",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"copy",value:function(){return new t(this.x,this.y)}}]),t}();F.zero=new F(0,0),F.up=new F(0,1),F.right=new F(1,0),F.bottom=new F(0,-1),F.left=new F(-1,0);var Z=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t))._paletteManager_ColorChangeEmitter_ForceUpdate=function(t){n.forceUpdate()},n._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate=function(t){n.forceUpdate()},n.state={selectedTilesetID:0},n}return Object(c.a)(o,[{key:"render",value:function(){var t=this;return Object(C.jsxs)(L,{name:this.props.name,icon:this.props.icon,children:[Object(C.jsx)(E,{paletteManager:this.props.paletteManager}),Object(C.jsx)(v.a,{children:this.props.tileManager.tilesets[this.state.selectedTilesetID].tileTypes.map((function(e){return Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0,0 1,1",children:e.buildSVG(new P(e,F.zero,0,0,t.props.paletteManager.selectedColor,t.props.paletteManager.selectedColorID))},e.id)}))})]})}},{key:"componentDidMount",value:function(){this.props.paletteManager.colorChangeEmitter.on(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.on(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate)}},{key:"componentWillUnmount",value:function(){this.props.paletteManager.colorChangeEmitter.off(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.off(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate)}}]),o}(i.a.Component),N=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t)).state={},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)(L,{name:this.props.name,icon:this.props.icon})}}]),o}(i.a.Component),B=o(95),R=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t)).state={},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)(L,{name:this.props.name,icon:this.props.icon,children:Object(C.jsx)(B.a,{})})}}]),o}(i.a.Component),K=o(86),W=o(87),q=o(88),G=o(89),V=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t)).state={activeToolKey:"brushTool"},n}return Object(c.a)(o,[{key:"render",value:function(){var t,e=this,o=[new H("fileTool","File",Object(C.jsx)(K.a,{color:"secondary"}),(function(t,o,n){return Object(C.jsx)(U,{name:o,icon:n,paletteManager:e.props.paletteManager},t)})),new H("brushTool","Brush Tool",Object(C.jsx)(W.a,{color:"secondary"}),(function(t,o,n){return Object(C.jsx)(Z,{name:o,icon:n,paletteManager:e.props.paletteManager,tileManager:e.props.tileManager},t)})),new H("eraserTool","Eraser Tool",Object(C.jsx)(q.a,{color:"secondary"}),(function(t,e,o){return Object(C.jsx)(N,{name:e,icon:o},t)})),new H("settingsTool","Settings",Object(C.jsx)(G.a,{color:"secondary"}),(function(t,e,o){return Object(C.jsx)(R,{name:e,icon:o},t)}))],n=o.map((function(t){return e.renderToolButton(t)})),i=null===(t=o.find((function(t){return e.state.activeToolKey===t.key})))||void 0===t?void 0:t.tool;return Object(C.jsxs)(v.a,{className:"".concat(this.props.classes.root," SideMenu"),bgcolor:"primary.dark",children:[Object(C.jsx)(v.a,{className:"ToolButtons",children:n}),i]})}},{key:"renderToolButton",value:function(t){var e=this;return Object(C.jsx)(M,{text:t.name,isActive:this.state.activeToolKey===t.key,onClick:function(){return e.setState({activeToolKey:t.key})},children:t.icon},"".concat(t.key,"Button"))}}]),o}(i.a.Component);V.contextType=j,V.defaultProps={};var H=function t(e,o,n,i){Object(s.a)(this,t),this.key=void 0,this.name=void 0,this.icon=void 0,this.tool=void 0,this.key=e,this.name=o,this.icon=n,this.tool=i(e,o,n)},X=Object(O.a)((function(){return Object(b.a)({root:{display:"grid",gridTemplateRows:"fit-content(100%) auto",position:"fixed",left:"0px",top:"0px",height:"100%",width:"260px",zIndex:200,textAlign:"center","& .ToolButtons":{display:"grid",gridAutoFlow:"column",gridAutoColumns:"minmax(0, 1fr)",gap:"4px",margin:"4px"}}})}))(V),Y=o(31),J=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t)).state={},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)("g",{className:"GridTiles",children:this.props.tileManager.placedTiles})}}]),o}(i.a.Component);J.contextType=j,J.defaultProps={};var $=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;Object(s.a)(this,o),(n=e.call(this,t))._svg=void 0,n._isDragging=!1,n._dragCursorOffset=new F(0,0),n._dragOffset=new F(0,0),n._tileKey=0,n._svg_OnMouseWheel_Zoom=function(t){if(t.ctrlKey){if(t.originalEvent.wheelDelta>0&&n.state.zoom>n.props.zoomMinimum||t.originalEvent.wheelDelta<0&&n.state.zoom<n.props.zoomMaximum){var e=h()(window),o=new F((t.offsetX-e.width()/2)*n.state.zoom*n.props.zoomOffsetMultiplier,(t.offsetY-e.height()/2)*n.state.zoom*n.props.zoomOffsetMultiplier);n.setState({offset:t.originalEvent.wheelDelta>0?n.state.offset.copy().subtract(o):n.state.offset.copy().add(o)})}n.addZoom(t.originalEvent.wheelDelta),t.preventDefault()}},n._svg_OnMouseDown_StartDragging=function(t){switch(t.button){case 1:n._dragOffset.x=n.state.offset.x,n._dragOffset.y=n.state.offset.y,n._dragCursorOffset.x=t.nativeEvent.offsetX,n._dragCursorOffset.y=t.nativeEvent.offsetY,n._isDragging=!0,t.preventDefault()}},n._document_OnMouseUp_StopDragging=function(t){n._isDragging=!1},n._svg_OnMouseMove_Drag=function(t){n._isDragging&&n.setState({offset:new F(n._dragOffset.x+(t.nativeEvent.offsetX-n._dragCursorOffset.x)*n.state.zoom,n._dragOffset.y+(t.nativeEvent.offsetY-n._dragCursorOffset.y)*n.state.zoom)})},n._document_OnKeyDown_Hotkeys=function(t){switch(t.key){case"ArrowLeft":n.setState({offset:new F(n.state.offset.x+n.props.offsetIncrement,n.state.offset.y)});break;case"ArrowUp":n.setState({offset:new F(n.state.offset.x,n.state.offset.y+n.props.offsetIncrement)});break;case"ArrowRight":n.setState({offset:new F(n.state.offset.x-n.props.offsetIncrement,n.state.offset.y)});break;case"ArrowDown":n.setState({offset:new F(n.state.offset.x,n.state.offset.y-n.props.offsetIncrement)});break;case"w":n.setState({gridSize:Math.min(2*n.state.gridSize,n.props.gridSizeMaximum)});break;case"s":n.setState({gridSize:Math.max(n.state.gridSize/2,n.props.gridSizeMinimum)});break;case"+":t.ctrlKey&&(n.addZoom(n.props.zoomIncrement),t.preventDefault());break;case"-":t.ctrlKey&&(n.addZoom(-n.props.zoomIncrement),t.preventDefault())}},n._window_Resize_SetSize=function(t){var e=h()(window);n.setState({size:new F(e.width(),e.height())})};var r,a=h()(window),c=new F(a.width(),a.height());return n.state={uniqueID:(r="grid",r in y||(y[r]=0),"".concat(r).concat(y[r]++)),gridSize:32,zoom:1,offset:new F(0,0),size:c,color1:"#202124",color2:"#303136"},n._svg=i.a.createRef(),window.$1=Object(Y.a)(n),n}return Object(c.a)(o,[{key:"render",value:function(){var t=this.state.offset.copy().add(this.state.size.copy().divide(2).multiply(this.state.zoom)),e=this.state.size.copy().multiply(this.state.zoom);return Object(C.jsxs)("svg",{className:"".concat(this.props.classes.root," Grid"),ref:this._svg,xmlns:"http://www.w3.org/2000/svg",width:"".concat(this.state.size.x,"px"),height:"".concat(this.state.size.y,"px"),viewBox:"".concat(-t.x,",").concat(-t.y," ").concat(e.x,",").concat(e.y),onMouseDown:this._svg_OnMouseDown_StartDragging,onMouseMove:this._svg_OnMouseMove_Drag,children:[this.renderDefs(),this.renderGrid(t,e),Object(C.jsx)(J,{tileManager:this.props.tileManager})]})}},{key:"renderDefs",value:function(){return Object(C.jsxs)("defs",{children:[Object(C.jsx)("pattern",{id:"".concat(this.state.uniqueID,"_pattern1"),width:this.state.gridSize,height:this.state.gridSize,patternUnits:"userSpaceOnUse",children:Object(C.jsx)("rect",{width:"".concat(this.state.gridSize,"px"),height:"".concat(this.state.gridSize,"px"),fill:"none",stroke:this.state.color1,strokeWidth:"1"})}),Object(C.jsxs)("pattern",{id:"".concat(this.state.uniqueID,"_pattern2"),width:"".concat(this.props.gridSizeMaximum,"px"),height:"".concat(this.props.gridSizeMaximum,"px"),patternUnits:"userSpaceOnUse",children:[Object(C.jsx)("rect",{width:"".concat(this.props.gridSizeMaximum,"px"),height:"".concat(this.props.gridSizeMaximum,"px"),fill:"url(#".concat(this.state.uniqueID,"_pattern1)")}),Object(C.jsx)("rect",{width:"".concat(this.props.gridSizeMaximum,"px"),height:"".concat(this.props.gridSizeMaximum,"px"),fill:"none",stroke:this.state.color1,strokeWidth:"3"})]})]})}},{key:"renderGrid",value:function(t,e){return Object(C.jsxs)("g",{children:[Object(C.jsx)("rect",{id:"".concat(this.state.uniqueID,"_rect1"),x:"".concat(-t.x,"px"),y:"".concat(-t.y,"px"),width:"100%",height:"100%",fill:"url(#".concat(this.state.uniqueID,"_pattern2)")}),Object(C.jsx)("line",{id:"".concat(this.state.uniqueID,"_line1"),x1:"".concat(-t.x,"px"),y1:"0",x2:"".concat(-t.x+e.x,"px"),y2:"0",stroke:this.state.color2,strokeWidth:"3"}),Object(C.jsx)("line",{id:"".concat(this.state.uniqueID,"_line2"),x1:"0",y1:"".concat(-t.y,"px"),x2:"0",y2:"".concat(-t.y+e.y,"px"),stroke:this.state.color2,strokeWidth:"3"})]})}},{key:"componentDidMount",value:function(){var t=h()(document),e=h()(window),o=h()(this._svg.current);t.on("mouseup",this._document_OnMouseUp_StopDragging),t.on("keydown",this._document_OnKeyDown_Hotkeys),e.on("resize",this._window_Resize_SetSize),o.on("mousewheel",this._svg_OnMouseWheel_Zoom)}},{key:"componentWillUnmount",value:function(){var t=h()(document),e=h()(window),o=h()(this._svg.current);t.off("mouseup",this._document_OnMouseUp_StopDragging),t.off("keydown",this._document_OnKeyDown_Hotkeys),e.off("resize",this._window_Resize_SetSize),o.off("mousewheel",this._svg_OnMouseWheel_Zoom)}},{key:"addZoom",value:function(t){var e,o,n;this.setState({zoom:(e=this.state.zoom-t*this.state.zoom*this.props.zoomMultiplier,o=this.props.zoomMinimum,n=this.props.zoomMaximum,Math.min(Math.max(e,o),n))})}},{key:"positionToGrid",value:function(t){return new F(Math.floor(t.x/this.state.gridSize),Math.floor(t.y/this.state.gridSize))}},{key:"gridToPosition",value:function(t){return t.copy().multiply(this.state.gridSize)}}]),o}(i.a.Component);$.contextType=j,$.defaultProps={offsetIncrement:32,zoomIncrement:120,zoomMultiplier:.002,zoomOffsetMultiplier:.24,zoomMinimum:.064,zoomMaximum:4,gridSizeMinimum:2,gridSizeMaximum:128};var Q=Object(O.a)((function(){return Object(b.a)({root:{position:"static",backgroundColor:"#0e0e10"}})}))($),tt=function t(){Object(s.a)(this,t)},et=function(){function t(){Object(s.a)(this,t),this._callbacks=new Map}return Object(c.a)(t,[{key:"on",value:function(t){this._callbacks.set(t,!0)}},{key:"off",value:function(t){this._callbacks.delete(t)}},{key:"once",value:function(t){var e=this;this.on((function(o){t(o),e.off(t)}))}},{key:"emit",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,e=t,o=0,n=Array.from(this._callbacks.keys());o<n.length;o++){var i=n[o];i(e)}return e}}]),t}(),ot=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t,n){var i;return Object(s.a)(this,o),(i=e.call(this)).colorID=void 0,i.color=void 0,i.colorID=t,i.color=n,i}return o}(tt),nt=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this)).selectedColorID=void 0,n.selectedColorID=t,n}return o}(tt),it=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(s.a)(this,t),this.colors=void 0,this.colorChangeEmitter=new et,this.selectedColorIDChangeEmitter=new et,this._selectedColorID=0,this._defaultColor="#ffffff",this.colors=e,0===this.colors.length&&this.addColor()}return Object(c.a)(t,[{key:"selectedColorID",get:function(){return this._selectedColorID},set:function(t){var e=this.selectedColorIDChangeEmitter.emit(new nt(t));this._selectedColorID=e.selectedColorID}},{key:"selectedColor",get:function(){return this.colors[this.selectedColorID]}},{key:"addColor",value:function(){this.setColor(this.colors.length,this._defaultColor)}},{key:"setColor",value:function(t,e){var o=this.colorChangeEmitter.emit(new ot(t,e));this.colors[o.colorID]=o.color}}]),t}(),rt=o(90),at=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t,n){var i;return Object(s.a)(this,o),(i=e.call(this)).tileID=void 0,i.tileData=void 0,i.tileID=t,i.tileData=n,i}return o}(tt),st=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this)).tileID=void 0,n.tileID=t,n}return o}(tt),ct=function(){function t(e){Object(s.a)(this,t),this.tilesets=void 0,this.placedTiles=[],this.tilePlacedEmitter=new et,this.tileErasedEmitter=new et,this._selectedTileType=void 0,this._currentTileID=0,this.tilesets=e,this._selectedTileType=this.tilesets[0].tileTypes[0]}return Object(c.a)(t,[{key:"placeTile",value:function(t){var e=this.tilePlacedEmitter.emit(new at(this._currentTileID++,t));return this.placedTiles[e.tileID]=e.tileData,e.tileID}},{key:"eraseTile",value:function(t){var e=this.tileErasedEmitter.emit(new st(t)),o=this.placedTiles[e.tileID];return delete this.placedTiles[e.tileID],o}}]),t}(),lt=function(t){Object(l.a)(o,t);var e=Object(p.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=e.call(this,t))._appContext=void 0,n.state={paletteManager:new it(n.props.defaultPaletteColors),tileManager:new ct(n.props.tilesets)},n._appContext={theme:n.props.theme},n}return Object(c.a)(o,[{key:"render",value:function(){return Object(C.jsx)(j.Provider,{value:this._appContext,children:Object(C.jsx)(rt.a,{theme:this.props.theme,children:Object(C.jsxs)(v.a,{className:"".concat(this.props.classes.root," App"),children:[this.renderContent(),Object(C.jsx)(X,{paletteManager:this.state.paletteManager,tileManager:this.state.tileManager})]})})})}},{key:"renderContent",value:function(){return Object(C.jsx)(v.a,{className:"Content",children:Object(C.jsx)(Q,{tileManager:this.state.tileManager})})}},{key:"componentDidMount",value:function(){h()(document.documentElement).css({"--theme-primary-main":this.props.theme.palette.primary.main,"--theme-primary-light":this.props.theme.palette.primary.light,"--theme-primary-dark":this.props.theme.palette.primary.dark,"--theme-secondary-main":this.props.theme.palette.secondary.main,"--theme-secondary-light":this.props.theme.palette.secondary.light,"--theme-secondary-dark":this.props.theme.palette.secondary.dark,"--theme-text-primary":this.props.theme.palette.text.primary,"--theme-text-secondary":this.props.theme.palette.text.secondary})}}]),o}(i.a.Component),pt=Object(O.a)((function(){return Object(b.a)({root:{userSelect:"none"}})}))(lt),ut=function(t){t&&t instanceof Function&&o.e(3).then(o.bind(null,99)).then((function(e){var o=e.getCLS,n=e.getFID,i=e.getFCP,r=e.getLCP,a=e.getTTFB;o(t),n(t),i(t),r(t),a(t)}))};var ht=function(t,e,o){var n=Object(d.a)({palette:{type:t,primary:{main:e},secondary:{main:o},text:{primary:o,secondary:e}}});return n=Object(f.a)(n)}("dark","#1f2f46","#79c0ff"),dt=function t(e,o){Object(s.a)(this,t),this.id=void 0,this.buildSVG=void 0,this.id=e,this.buildSVG=o},ft=[new function t(e,o){Object(s.a)(this,t),this.name=void 0,this.tileTypes=void 0,this.name=e,this.tileTypes=o}("Basic",[new dt("tile1",(function(t){return Object(C.jsx)("rect",{width:1,height:1,fill:t.color})})),new dt("tile2",(function(t){return Object(C.jsx)("path",{d:"M0.5,0 L1,0 L1,1 L0,1 L0,0.5 Z",fill:t.color})})),new dt("tile3",(function(t){return Object(C.jsx)("path",{d:"M1,0 L1,1 L0,1 Z",fill:t.color})})),new dt("tile4",(function(t){return Object(C.jsx)("path",{d:"M0.5,0 L1,0 L1,1 L0,1 L0,0.5 A 0.5,0.5 0 0 1 0.5,0 Z",fill:t.color})})),new dt("tile5",(function(t){return Object(C.jsx)("path",{d:"M1,0 L1,1 L0,1 A 1,1 0 0 1 1,0 Z",fill:t.color})})),new dt("tile6",(function(t){return Object(C.jsx)("path",{d:"M0.5,0 L1,0 L1,1 L0,1 L0,0.5 A 0.5,0.5 0 0 0 0.5,0 Z",fill:t.color})})),new dt("tile7",(function(t){return Object(C.jsx)("path",{d:"M1,0 L1,1 L0,1 A 1,1 0 0 0 1,0 Z",fill:t.color})})),new dt("tile8",(function(t){return Object(C.jsx)("circle",{cx:.5,cy:.5,r:.5,fill:t.color})})),new dt("tile9",(function(t){return Object(C.jsxs)("g",{children:[Object(C.jsx)("path",{d:"M0,0.5 L0,0 L0.5,0 A 0.5,0.5,0 0 0 0 0.5,Z",fill:t.color}),Object(C.jsx)("path",{d:"M1,0.5 A 0.5,0.5 0 0 0 0.5,0 L1,0 Z",fill:t.color}),Object(C.jsx)("path",{d:"M1,0.5 L1,1 L0.5,1 A 0.5,0.5 0 0 0 1,0.5 Z",fill:t.color}),Object(C.jsx)("path",{d:"M0,0.5 A 0.5,0.5 0 0 0 0.5,1 L0,1 Z",fill:t.color})]})})),new dt("tile10",(function(t){return Object(C.jsx)("polygon",{points:"0.5,0 1,1 0,1",fill:t.color})})),new dt("tile11",(function(t){return Object(C.jsxs)("g",{children:[Object(C.jsx)("polygon",{points:"0.25,0 0.5,1 0,1",fill:t.color}),Object(C.jsx)("polygon",{points:"0.75,0 1,1 0.5,1",fill:t.color})]})})),new dt("tile12",(function(t){return Object(C.jsx)("polygon",{points:"0.5,0.5 1,1 0,1",fill:t.color})})),new dt("tile13",(function(t){return Object(C.jsxs)("g",{children:[Object(C.jsx)("polygon",{points:"0.25,0.5 0.5,1 0,1",fill:t.color}),Object(C.jsx)("polygon",{points:"0.75,0.5 1,1 0.5,1",fill:t.color})]})})),new dt("tile14",(function(t){return Object(C.jsx)("polygon",{points:"0,0 0.5,1 1,0 1,1 0,1",fill:t.color})})),new dt("tile15",(function(t){return Object(C.jsx)("polygon",{points:"0,0 0.25,1 0.5,0 0.75,1 1,0 1,1 0,1",fill:t.color})})),new dt("tile16",(function(t){return Object(C.jsx)("polygon",{points:"0,0 0.5,0.5 1,0 1,1 0,1",fill:t.color})})),new dt("tile17",(function(t){return Object(C.jsx)("polygon",{points:"0,0 0.25,0.5 0.5,0 0.75,0.5 1,0 1,1 0,1",fill:t.color})}))])],mt=["#ffffff","#cccccc","#000000","#333333","#925c3a","#784f35","#dc6d1c","#f4dd42","#b23434","#631d1d","#81b93b","#4d893a","#5e81ca","#343d65","#cc00ff","#8f00b3","#ffb3ff"];o(69);a.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(pt,{theme:ht,tilesets:ft,defaultPaletteColors:mt})}),document.getElementById("root")),ut()}},[[70,1,2]]]);
//# sourceMappingURL=main.deb78042.chunk.js.map