{"version":3,"sources":["AppContext.ts","util.ts","Components/ToolButton.tsx","Components/PaletteColor.tsx","Components/PaletteAddColor.tsx","Components/Palette.tsx","Components/Tools/ToolBox.tsx","Components/Tools/FileTool.tsx","TileData.ts","Vector2D.ts","Components/Tools/BrushTool.tsx","Components/Tools/EraserTool.tsx","Components/Tools/SettingsTool.tsx","Components/SideMenu.tsx","Components/Tile.tsx","Components/GridTiles.tsx","Components/Grid.tsx","Emitter.ts","PaletteManager.ts","TileManager.ts","Components/App.tsx","reportWebVitals.ts","data/themes.ts","TileType.ts","data/tilesets.tsx","Tileset.ts","data/defaultPaletteColors.ts","index.tsx"],"names":["theme","createMuiTheme","responsiveFontSizes","AppContext","React","createContext","ids","conditionalClass","className","condition","ToolButton","props","state","Tooltip","title","this","text","enterDelay","tooltipEnterDelay","ButtonBase","classes","root","isActive","onClick","Box","children","Component","contextType","withStyles","createStyles","paddingTop","border","borderColor","display","position","top","right","bottom","left","justifyContent","alignItems","backgroundColor","PaletteColor","_inputRef","_allowClick","_input_OnChange_SetPaletteColor","event","paletteManager","setColor","colorID","target","value","_input_OnClick_SelectColorID","isSelectable","selectedColorID","preventDefault","isEditable","_input_OnDoubleClick_OpenMenu","current","click","_input_OnContextMenu_OpenMenu","createRef","isSelected","ref","style","color","type","defaultValue","onChange","onDoubleClick","onContextMenu","defaultProps","width","height","padding","margin","cursor","PaletteAddColor","_paletteAddColor_OnClick_AddColor","addColor","marginBottom","fontSize","Palette","_paletteManager_ColorChangeEmitter_ForceUpdate","forceUpdate","_paletteManager_SelectedColorIDChangeEmitter_ForceUpdate","colors","map","colorChangeEmitter","on","selectedColorIDChangeEmitter","off","gridTemplateColumns","gap","ToolBox","bgcolor","mt","mb","Typography","variant","name","overflow","FileTool","icon","TileData","tileType","size","rotation","Vector2D","x","y","other","zero","up","BrushTool","_isDrawing","_tileManager_SelectedTilesetChangedEmitter_ForceUpdate","_tileManager_SelectedTileTypeChangedEmitter_ForceUpdate","_grid_MouseDown_StartDrawing","button","_grid_MouseUp_StopDrawing","_grid_MouseMove_Draw","tileManager","placeTile","selectedTileType","offsetX","offsetY","selectedColor","tileTypes","renderTileTypes","selectedTileset","xmlns","viewBox","buildSVG","id","$grid","$","selectedTilesetChangedEmitter","selectedTileTypeChangedEmitter","gridGap","boxSizing","EraserTool","SettingsTool","Slider","SideMenu","activeToolKey","toolDataset","ToolData","Description","key","Brush","Delete","Settings","toolButtons","toolData","renderToolButton","activeTool","find","tool","setState","renderTool","gridTemplateRows","zIndex","textAlign","gridAutoFlow","gridAutoColumns","Tile","transformOrigin","tileData","transform","fill","GridTiles","placedTiles","tileDataID","Grid","_svg","_isDragging","_dragCursorOffset","_dragOffset","_tileManager_TilePlacedEmitter_ForceUpdate","_tileManager_TileErasedEmitter_ForceUpdate","_svg_MouseWheel_Zoom","ctrlKey","originalEvent","wheelDelta","zoom","zoomMinimum","zoomMaximum","$window","window","add","zoomOffsetMultiplier","offset","copy","subtract","addZoom","_svg_OnMouseDown_StartDragging","nativeEvent","_document_MouseUp_StopDragging","_svg_OnMouseMove_Drag","_document_KeyDown_Hotkeys","offsetIncrement","gridSize","Math","min","gridSizeMaximum","max","gridSizeMinimum","zoomIncrement","_window_Resize_SetSize","prefix","windowSize","uniqueID","color1","color2","divide","multiply","onMouseDown","onMouseMove","renderDefs","renderGrid","patternUnits","stroke","strokeWidth","x1","y1","x2","y2","$document","document","$svg","tilePlacedEmitter","tileErasedEmitter","zoomAdd","zoomMultiplier","floor","gridPosition","Event","Emitter","_callbacks","Map","onEmit","set","delete","tEvent","Array","from","keys","ColorChangeEvent","SelectedColorIDChangeEvent","PaletteManager","_selectedColorID","_defaultColor","length","selectedColorIDChangeEvent","emit","colorChangeEvent","TilePlacedEvent","tileID","TileErasedEvent","SelectedTilesetChangedEvent","tileset","SelectedTileTypeChangedEvent","TileManager","tilesets","_selectedTileset","_selectedTileType","_currentTileID","selectedTilesetChangedEvent","selectedTileTypeChangedEvent","tilePlacedEvent","tileErasedEvent","App","_appContext","defaultPaletteColors","Provider","ThemeProvider","renderContent","documentElement","css","palette","primary","main","light","dark","secondary","userSelect","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","createTheme","primaryColor","secondaryColor","TileType","d","cx","cy","r","points","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.84670d09.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {createMuiTheme, responsiveFontSizes} from \"@material-ui/core/styles\";\r\nimport {Theme} from \"@material-ui/core\";\r\n\r\nlet theme = createMuiTheme();\r\ntheme = responsiveFontSizes(theme);\r\n\r\nexport interface IAppContext\r\n{\r\n\ttheme: Theme\r\n}\r\n\r\nconst AppContext = React.createContext<IAppContext>({\r\n\ttheme: theme\r\n});\r\nexport default AppContext;\r\n","\r\nexport function isPowerOfTwo(x: number): boolean\r\n{\r\n\treturn (Math.log(x) / Math.log(2)) % 1 === 0;\r\n}\r\n\r\nlet ids: {[prefix: string]: number} = {};\r\nexport function generateUniqueID(prefix: string): string\r\n{\r\n\tif(!(prefix in ids))\r\n\t{\r\n\t\tids[prefix] = 0;\r\n\t}\r\n\r\n    return `${prefix}${ids[prefix]++}`;\r\n}\r\n\r\nexport function clamp(value: number, min: number, max: number): number\r\n{\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n\r\nexport function conditionalClass(className: string, condition: boolean): string\r\n{\r\n\treturn condition ? className : \"\";\r\n}\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport {Box, ButtonBase, Tooltip, createStyles, withStyles, WithStyles} from \"@material-ui/core\";\r\nimport {conditionalClass} from \"../util\";\r\n\r\nconst styles = () => createStyles({\r\n\troot: {\r\n\t\tpaddingTop: \"100% !important\",\r\n\r\n\t\t\"&.Active\": {\r\n\t\t\tborder: \"2px solid\",\r\n\t\t\tborderColor: \"var(--theme-secondary-main)\",\r\n\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tborderColor: \"var(--theme-secondary-main)\",\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t\"&:hover\": {\r\n\t\t\tborder: \"2px solid var(--theme-secondary-dark)\",\r\n\t\t},\r\n\r\n\t\t\"& div\": {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\ttop: \"0px\",\r\n\t\t\tright: \"0px\",\r\n\t\t\tbottom: \"0px\",\r\n\t\t\tleft: \"0px\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tbackgroundColor: \"var(--theme-primary-main)\",\r\n\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tbackgroundColor: \"var(--theme-primary-dark)\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles> {\r\n\tchildren: React.ReactNode;\r\n\ttext: string;\r\n\tisActive: boolean;\r\n\tonClick: (event: React.MouseEvent) => void\r\n}\r\n\r\nexport interface IState {}\r\n\r\nclass ToolButton extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\t/*static propTypes = {\r\n\t\tclasses: PropTypes.object.isRequired\r\n\t}*/\r\n\tstatic tooltipEnterDelay = 700;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Tooltip title={this.props.text} enterDelay={ToolButton.tooltipEnterDelay}>\r\n\t\t\t\t<ButtonBase className={`${this.props.classes.root} ToolButton ${conditionalClass(\"Active\", this.props.isActive)}`} onClick={this.props.onClick}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</ButtonBase>\r\n\t\t\t</Tooltip>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(ToolButton);\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport PaletteManager from \"../PaletteManager\";\r\nimport {ButtonBase, WithStyles, createStyles, withStyles} from \"@material-ui/core\";\r\nimport {conditionalClass} from \"../util\";\r\n\r\nconst styles = () => createStyles({\r\n\troot: {\r\n\t\twidth: \"calc(100% - 4px)\",\r\n\t\theight: \"calc(100% - 4px)\",\r\n\t\tpadding: \"2px\",\r\n\t\tmargin: \"0px\",\r\n\r\n\t\t\"&.Selectable\": {\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tbackgroundColor: \"var(--theme-secondary-dark)\"\r\n\t\t\t},\r\n\r\n\t\t\t\"&.Active\": {\r\n\t\t\t\tbackgroundColor: \"var(--theme-secondary-main)\"\r\n\t\t\t},\r\n\r\n\t\t\t\"& > div > button > input\": {\r\n\t\t\t\tcursor: \"pointer\"\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t\"&.Editable > div > button > input\": {\r\n\t\t\tcursor: \"pointer\"\r\n\t\t},\r\n\r\n\t\t\"& > div\": {\r\n\t\t\twidth: \"100%\",\r\n\r\n\t\t\t\"& > button\": {\r\n\t\t\t\tposition: \"relative\",\r\n\t\t\t\tleft: \"0px\",\r\n\t\t\t\twidth: \"100%\",\r\n\r\n\t\t\t\t\"& > input\": {\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\theight: \"4px\",\r\n\t\t\t\t\tmargin: \"0px\",\r\n\t\t\t\t\tpadding: \"calc(100% - 8px) 0px 0px 0px\",\r\n\t\t\t\t\tcursor: \"initial\",\r\n\t\t\t\t\tborder: \"2px solid var(--theme-primary-dark)\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles>\r\n{\r\n\tpaletteManager: PaletteManager;\r\n\tcolorID: number;\r\n\tcolor: string;\r\n\tisEditable: boolean;\r\n\tisSelectable: boolean;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nclass PaletteColor extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tstatic defaultProps = {\r\n\t\tisEditable: true,\r\n\t\tisSelectable: true\r\n\t};\r\n\r\n\tprivate _inputRef: React.RefObject<HTMLInputElement>;\r\n\tprivate _allowClick: boolean = false;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\r\n\t\tthis._inputRef = React.createRef();\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div className={`${this.props.classes.root} PaletteColor ${conditionalClass(\"Selectable\", this.props.isSelectable)} ${conditionalClass(\"Editable\", this.props.isEditable)} ${conditionalClass(\"Active\", this.isSelected())}`}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ButtonBase>\r\n\t\t\t\t\t\t<input ref={this._inputRef} style={{backgroundColor: this.props.color}} type=\"color\" defaultValue={this.props.color} onChange={this._input_OnChange_SetPaletteColor} onClick={this._input_OnClick_SelectColorID} onDoubleClick={this._input_OnDoubleClick_OpenMenu} onContextMenu={this._input_OnContextMenu_OpenMenu} />\r\n\t\t\t\t\t</ButtonBase>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tprivate _input_OnChange_SetPaletteColor = (event: React.ChangeEvent) =>\r\n\t{\r\n\t\tthis.props.paletteManager.setColor(this.props.colorID, (event.target as any).value);\r\n\t}\r\n\r\n\tprivate _input_OnClick_SelectColorID = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this.props.isSelectable)\r\n\t\t{\r\n\t\t\tthis.props.paletteManager.selectedColorID = this.props.colorID;\r\n\r\n\t\t\tif(this._allowClick)\r\n\t\t\t{\r\n\t\t\t\tthis._allowClick = false;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!this.props.isEditable)\r\n\t\t{\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _input_OnDoubleClick_OpenMenu = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this.props.isEditable && this.props.isSelectable)\r\n\t\t{\r\n\t\t\tthis._allowClick = true;\r\n\t\t\tthis._inputRef.current?.click();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _input_OnContextMenu_OpenMenu = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this.props.isSelectable)\r\n\t\t{\r\n\t\t\tthis._allowClick = true;\r\n\t\t}\r\n\r\n\t\tthis._inputRef.current?.click();\r\n\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\tprivate isSelected(): boolean\r\n\t{\r\n\t\treturn this.props.paletteManager.selectedColorID === this.props.colorID;\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(PaletteColor);\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport PaletteManager from \"../PaletteManager\";\r\nimport {Tooltip, ButtonBase, WithStyles, createStyles, withStyles} from \"@material-ui/core\";\r\n\r\nconst styles = () => createStyles({\r\n\troot: {\r\n\t\tposition: \"relative\",\r\n\t\tleft: \"2px\",\r\n\t\ttop: \"2px\",\r\n\t\twidth: \"calc(100% - 4px)\",\r\n\t\theight: \"0px\",\r\n\t\tpadding: \"0px\",\r\n\t\tpaddingTop: \"calc(100% - 8px)\",\r\n\t\tmargin: \"0px\",\r\n\t\tmarginBottom: \"4px\",\r\n\t\tborder: \"2px solid\",\r\n\t\tcursor: \"pointer\",\r\n\t\tbackgroundColor: \"var(--theme-primary-dark)\",\r\n\t\tborderColor: \"var(--theme-secondary-main)\",\r\n\r\n\t\t\"&:hover\": {\r\n\t\t\tbackgroundColor: \"var(--theme-primary-main)\"\r\n\t\t},\r\n\r\n\t\t\"& div\": {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\ttop: \"0px\",\r\n\t\t\tright: \"0px\",\r\n\t\t\tbottom: \"0px\",\r\n\t\t\tleft: \"0px\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tfontSize: \"31px\",\r\n\t\t\tcolor: \"var(--theme-secondary-main)\"\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles>\r\n{\r\n\tpaletteManager: PaletteManager;\r\n\ttext: string;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nclass PaletteAddColor extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tstatic defaultProps = {\r\n\t\ttext: \"Add Color\"\r\n\t}\r\n\tstatic tooltipEnterDelay = 700;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Tooltip title={this.props.text} enterDelay={PaletteAddColor.tooltipEnterDelay}>\r\n\t\t\t\t<ButtonBase className={`${this.props.classes.root} PaletteAddColor`} onClick={this._paletteAddColor_OnClick_AddColor}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t+\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ButtonBase>\r\n\t\t\t</Tooltip>\r\n\t\t)\r\n\t}\r\n\r\n\tprivate _paletteAddColor_OnClick_AddColor = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tthis.props.paletteManager.addColor();\r\n\t}\r\n\r\n}\r\n\r\nexport default withStyles(styles)(PaletteAddColor);\r\n","import React from \"react\";\r\nimport PaletteColor from \"./PaletteColor\";\r\nimport PaletteAddColor from \"./PaletteAddColor\";\r\nimport AppContext from \"../AppContext\";\r\nimport {Box, WithStyles, createStyles, withStyles} from \"@material-ui/core\";\r\nimport PaletteManager, {ColorChangeEvent, SelectedColorIDChangeEvent} from \"../PaletteManager\";\r\n\r\nconst styles = () => createStyles({\r\n\troot: {\r\n\t\tdisplay: \"grid\",\r\n\t\tgridTemplateColumns: \"repeat(6, auto)\",\r\n\t\tgap: \"0px\",\r\n\t\tmargin: \"2px\"\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles>\r\n{\r\n\tpaletteManager: PaletteManager;\r\n\tisEditable: boolean;\r\n\tisSelectable: boolean;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nclass Palette extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tstatic defaultProps = {\r\n\t\tisEditable: true,\r\n\t\tisSelectable: true\r\n\t};\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Box className={`${this.props.classes.root} Palette`}>\r\n\t\t\t\t{this.props.paletteManager.colors.map((color: string, colorID: number) => <PaletteColor key={colorID} paletteManager={this.props.paletteManager} colorID={colorID} color={color} isEditable={this.props.isEditable} isSelectable={this.props.isSelectable} />)}\r\n\t\t\t\t{this.props.isEditable ? <PaletteAddColor paletteManager={this.props.paletteManager} /> : null}\r\n\t\t\t</Box>\r\n\t\t)\r\n\t}\r\n\r\n\tpublic componentDidMount(): void\r\n\t{\r\n\t\tthis.props.paletteManager.colorChangeEmitter.on(this._paletteManager_ColorChangeEmitter_ForceUpdate);\r\n\t\tthis.props.paletteManager.selectedColorIDChangeEmitter.on(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate);\r\n\t}\r\n\r\n\tpublic componentWillUnmount(): void\r\n\t{\r\n\t\tthis.props.paletteManager.colorChangeEmitter.off(this._paletteManager_ColorChangeEmitter_ForceUpdate);\r\n\t\tthis.props.paletteManager.selectedColorIDChangeEmitter.off(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate);\r\n\t}\r\n\r\n\t_paletteManager_ColorChangeEmitter_ForceUpdate = (event: ColorChangeEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\t_paletteManager_SelectedColorIDChangeEmitter_ForceUpdate = (event: SelectedColorIDChangeEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Palette);\r\n","import React from \"react\";\r\nimport AppContext from \"../../AppContext\";\r\nimport {Typography, Box, WithStyles, createStyles, withStyles} from \"@material-ui/core\";\r\n\r\nconst styles = () => createStyles({\r\n\troot: {\r\n\t\theight: \"100%\",\r\n\t\tmargin: \"0px 4px 0px 4px\",\r\n\t\toverflow: \"auto\"\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles>\r\n{\r\n\tchildren: React.ReactNode;\r\n\tname: string;\r\n\ticon: React.ReactNode;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport class ToolBox extends React.Component<IProps, IState>\r\n{\r\n\tpublic static contextType = AppContext;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Box className={`${this.props.classes.root} Tool`} bgcolor=\"primary.main\">\r\n\t\t\t\t<Box mt={1} mb={1}>\r\n\t\t\t\t\t<Typography className=\"Name\" color=\"textPrimary\" variant=\"h5\">\r\n\t\t\t\t\t\t{this.props.name}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box className=\"Properties\">\r\n\t\t\t\t\t{this.props.children}\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(ToolBox);\r\n","import React from \"react\";\r\nimport Palette from \"../Palette\";\r\nimport PaletteManager from \"../../PaletteManager\";\r\nimport ToolBox from \"./ToolBox\";\r\n\r\nexport interface IProps\r\n{\r\n\tname: string;\r\n\ticon: React.ReactNode;\r\n\tpaletteManager: PaletteManager;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class FileTool extends React.Component<IProps, IState>\r\n{\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ToolBox name={this.props.name} icon={this.props.icon}>\r\n\t\t\t\t<Palette paletteManager={this.props.paletteManager} isEditable={true} isSelectable={false} />\r\n\t\t\t</ToolBox>\r\n\t\t);\r\n\t}\r\n}\r\n","import TileType from \"./TileType\";\r\nimport Vector2D from \"./Vector2D\";\r\n\r\nexport default class TileData\r\n{\r\n\ttileType: TileType;\r\n\tposition: Vector2D;\r\n\tsize: number;\r\n\trotation: number;\r\n\tcolor: string;\r\n\tcolorID: number;\r\n\r\n\tconstructor(tileType: TileType, position: Vector2D, size: number, rotation: number, color: string, colorID: number)\r\n\t{\r\n\t\tthis.tileType = tileType;\r\n\t\tthis.position = position;\r\n\t\tthis.size = size;\r\n\t\tthis.rotation = rotation;\r\n\t\tthis.color = color;\r\n\t\tthis.colorID = colorID;\r\n\t}\r\n}\r\n","\r\nexport default class Vector2D\r\n{\r\n\tstatic zero = new Vector2D(0, 0);\r\n\tstatic up = new Vector2D(0, 1);\r\n\tstatic right = new Vector2D(1, 0);\r\n\tstatic bottom = new Vector2D(0, -1);\r\n\tstatic left = new Vector2D(-1, 0);\r\n\r\n\tx: number;\r\n\ty: number;\r\n\r\n\tconstructor(x: number, y: number)\r\n\t{\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tadd(other: Vector2D): Vector2D;\r\n\tadd(other: number): Vector2D;\r\n\tadd(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x += other;\r\n\t\t\tthis.y += other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x += other.x;\r\n\t\t\tthis.y += other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsubtract(other: Vector2D): Vector2D\r\n\tsubtract(other: number): Vector2D\r\n\tsubtract(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x -= other;\r\n\t\t\tthis.y -= other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x -= other.x;\r\n\t\t\tthis.y -= other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tmultiply(other: Vector2D): Vector2D;\r\n\tmultiply(other: number): Vector2D;\r\n\tmultiply(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x *= other;\r\n\t\t\tthis.y *= other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x *= other.x;\r\n\t\t\tthis.y *= other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdivide(other: Vector2D): Vector2D;\r\n\tdivide(other: number): Vector2D;\r\n\tdivide(other: any): Vector2D\r\n\t{\r\n\t\tif(typeof other === \"number\")\r\n\t\t{\r\n\t\t\tthis.x /= other;\r\n\t\t\tthis.y /= other;\r\n\t\t}\r\n\t\telse if(other instanceof Vector2D)\r\n\t\t{\r\n\t\t\tthis.x /= other.x;\r\n\t\t\tthis.y /= other.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tequal(other: Vector2D): boolean\r\n\t{\r\n\t\treturn this.x === other.x && this.y === other.y;\r\n\t}\r\n\r\n\tcopy(): Vector2D\r\n\t{\r\n\t\treturn new Vector2D(this.x, this.y);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport $ from \"jquery\";\r\nimport Palette from \"../Palette\";\r\nimport PaletteManager, {ColorChangeEvent, SelectedColorIDChangeEvent} from \"../../PaletteManager\";\r\nimport TileManager, {SelectedTilesetChangedEvent, SelectedTileTypeChangedEvent} from \"../../TileManager\";\r\nimport ToolBox from \"./ToolBox\";\r\nimport {Box, ButtonBase, WithStyles, createStyles, withStyles} from \"@material-ui/core\";\r\nimport TileType from \"../../TileType\";\r\nimport TileData from \"../../TileData\";\r\nimport Vector2D from \"../../Vector2D\";\r\nimport {conditionalClass} from \"../../util\";\r\n\r\nconst styles = () => createStyles({\r\n\ttileTypes: {\r\n\t\tdisplay: \"grid\",\r\n\t\tgridTemplateColumns: \"repeat(4, minmax(0, 1fr))\",\r\n\t\tgridGap: \"2px\",\r\n\t\tmargin: \"2px\",\r\n\r\n\t\t\"& > .TileType\": {\r\n\t\t\tboxSizing: \"border-box\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tpadding: \"2px\",\r\n\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tbackgroundColor: \"var(--theme-secondary-dark)\"\r\n\t\t\t},\r\n\r\n\t\t\t\"&.Active\": {\r\n\t\t\t\tbackgroundColor: \"var(--theme-secondary-main)\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles>\r\n{\r\n\tname: string;\r\n\ticon: React.ReactNode;\r\n\tpaletteManager: PaletteManager;\r\n\ttileManager: TileManager;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nclass BrushTool extends React.Component<IProps, IState>\r\n{\r\n\tprivate _isDrawing: boolean = false;\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ToolBox name={this.props.name} icon={this.props.icon}>\r\n\t\t\t\t<Palette paletteManager={this.props.paletteManager} />\r\n\t\t\t\t<Box className={`${this.props.classes.tileTypes} TileTypes`}>\r\n\t\t\t\t\t{this.renderTileTypes()}\r\n\t\t\t\t</Box>\r\n\t\t\t</ToolBox>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderTileTypes(): React.ReactNode\r\n\t{\r\n\t\treturn this.props.tileManager.selectedTileset.tileTypes.map((tileType: TileType) => (\r\n\t\t\t<ButtonBase key={tileType.id} className={`TileType ${conditionalClass(\"Active\", this.props.tileManager.selectedTileType === tileType)}`} onClick={() => this.props.tileManager.selectedTileType = tileType}>\r\n\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0 1,1\">\r\n\t\t\t\t\t{tileType.buildSVG(new TileData(tileType, Vector2D.zero, 0, 0, this.props.paletteManager.selectedColor, this.props.paletteManager.selectedColorID))}\r\n\t\t\t\t</svg>\r\n\t\t\t</ButtonBase>\r\n\t\t));\r\n\t}\r\n\r\n\tpublic componentDidMount(): void\r\n\t{\r\n\t\tconst $grid = $(\".Grid\");\r\n\r\n\t\tthis.props.paletteManager.colorChangeEmitter.on(this._paletteManager_ColorChangeEmitter_ForceUpdate);\r\n\t\tthis.props.paletteManager.selectedColorIDChangeEmitter.on(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate);\r\n\t\tthis.props.tileManager.selectedTilesetChangedEmitter.on(this._tileManager_SelectedTilesetChangedEmitter_ForceUpdate);\r\n\t\tthis.props.tileManager.selectedTileTypeChangedEmitter.on(this._tileManager_SelectedTileTypeChangedEmitter_ForceUpdate);\r\n\t\t$grid.on(\"mousedown\", this._grid_MouseDown_StartDrawing);\r\n\t\t$grid.on(\"mouseup\", this._grid_MouseUp_StopDrawing);\r\n\t\t$grid.on(\"mousemove\", this._grid_MouseMove_Draw);\r\n\t}\r\n\r\n\tpublic componentWillUnmount(): void\r\n\t{\r\n\t\tconst $grid = $(\".Grid\");\r\n\r\n\t\tthis.props.paletteManager.colorChangeEmitter.off(this._paletteManager_ColorChangeEmitter_ForceUpdate);\r\n\t\tthis.props.paletteManager.selectedColorIDChangeEmitter.off(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate);\r\n\t\tthis.props.tileManager.selectedTilesetChangedEmitter.off(this._tileManager_SelectedTilesetChangedEmitter_ForceUpdate);\r\n\t\tthis.props.tileManager.selectedTileTypeChangedEmitter.off(this._tileManager_SelectedTileTypeChangedEmitter_ForceUpdate);\r\n\t\t$grid.off(\"mousedown\", this._grid_MouseDown_StartDrawing);\r\n\t\t$grid.off(\"mouseup\", this._grid_MouseUp_StopDrawing);\r\n\t\t$grid.off(\"mousemove\", this._grid_MouseMove_Draw);\r\n\t}\r\n\r\n\t_paletteManager_ColorChangeEmitter_ForceUpdate = (event: ColorChangeEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\t_paletteManager_SelectedColorIDChangeEmitter_ForceUpdate = (event: SelectedColorIDChangeEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\t_tileManager_SelectedTilesetChangedEmitter_ForceUpdate = (event: SelectedTilesetChangedEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\t_tileManager_SelectedTileTypeChangedEmitter_ForceUpdate = (event: SelectedTileTypeChangedEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\t_grid_MouseDown_StartDrawing = (event: JQuery.MouseDownEvent) =>\r\n\t{\r\n\t\tif(!this._isDrawing && event.button === 0)\r\n\t\t{\r\n\t\t\tthis._isDrawing = true;\r\n\t\t}\r\n\t}\r\n\r\n\t_grid_MouseUp_StopDrawing = (event: JQuery.MouseUpEvent) =>\r\n\t{\r\n\t\tif(this._isDrawing && event.button === 0)\r\n\t\t{\r\n\t\t\tthis._isDrawing = false;\r\n\t\t}\r\n\t}\r\n\r\n\t_grid_MouseMove_Draw = (event: JQuery.MouseMoveEvent) =>\r\n\t{\r\n\t\tif(this._isDrawing)\r\n\t\t{\r\n\t\t\tthis.props.tileManager.placeTile(new TileData(this.props.tileManager.selectedTileType, new Vector2D(event.offsetX, event.offsetY), 32, 0, this.props.paletteManager.selectedColor, this.props.paletteManager.selectedColorID));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(BrushTool);\r\n","import React from \"react\";\r\nimport ToolBox from \"./ToolBox\";\r\n\r\nexport interface IProps\r\n{\r\n\tname: string;\r\n\ticon: React.ReactNode;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class EraserTool extends React.Component<IProps, IState>\r\n{\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ToolBox name={this.props.name} icon={this.props.icon}>\r\n\r\n\t\t\t</ToolBox>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport ToolBox from \"./ToolBox\";\r\n\r\nexport interface IProps\r\n{\r\n\tname: string;\r\n\ticon: React.ReactNode;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class SettingsTool extends React.Component<IProps, IState>\r\n{\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ToolBox name={this.props.name} icon={this.props.icon}>\r\n\t\t\t\t<Slider />\r\n\t\t\t</ToolBox>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ToolButton from \"./ToolButton\";\r\nimport FileTool from \"./Tools/FileTool\";\r\nimport BrushTool from \"./Tools/BrushTool\";\r\nimport EraserTool from \"./Tools/EraserTool\";\r\nimport SettingsTool from \"./Tools/SettingsTool\";\r\nimport AppContext from \"../AppContext\";\r\nimport PaletteManager from \"../PaletteManager\";\r\nimport TileManager from \"../TileManager\";\r\nimport {Box, WithStyles, createStyles, withStyles} from \"@material-ui/core\";\r\nimport {Description, Brush, Delete, Settings} from \"@material-ui/icons\";\r\n\r\nconst styles = () => createStyles({\r\n\troot: {\r\n\t\tdisplay: \"grid\",\r\n\t\tgridTemplateRows: \"fit-content(100%) auto\",\r\n\t\tposition: \"fixed\",\r\n\t\tleft: \"0px\",\r\n\t\ttop: \"0px\",\r\n\t\theight: \"100%\",\r\n\t\twidth: \"260px\",\r\n\t\tzIndex: 200,\r\n\t\ttextAlign: \"center\",\r\n\r\n\t\t\"& .ToolButtons\": {\r\n\t\t\tdisplay: \"grid\",\r\n\t\t\tgridAutoFlow: \"column\",\r\n\t\t\tgridAutoColumns: \"minmax(0, 1fr)\",\r\n\t\t\tgap: \"4px\",\r\n\t\t\tmargin: \"4px\"\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles>\r\n{\r\n\tpaletteManager: PaletteManager;\r\n\ttileManager: TileManager;\r\n}\r\n\r\nexport interface IState\r\n{\r\n\tactiveToolKey: string;\r\n}\r\n\r\nclass SideMenu extends React.Component<IProps, IState>\r\n{\r\n\tpublic static contextType = AppContext;\r\n\tpublic static defaultProps = {};\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tactiveToolKey: \"brushTool\"\r\n\t\t};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\tconst toolDataset: ToolData[] = [\r\n\t\t\tnew ToolData(\"fileTool\", \"File\", <Description color=\"secondary\" />, (key, name, icon) => <FileTool key={key} name={name} icon={icon} paletteManager={this.props.paletteManager} />),\r\n\t\t\tnew ToolData(\"brushTool\", \"Brush Tool\", <Brush color=\"secondary\" />, (key, name, icon) => <BrushTool key={key} name={name} icon={icon} paletteManager={this.props.paletteManager} tileManager={this.props.tileManager} />),\r\n\t\t\tnew ToolData(\"eraserTool\", \"Eraser Tool\", <Delete color=\"secondary\" />, (key, name, icon) => <EraserTool key={key} name={name} icon={icon} />),\r\n\t\t\tnew ToolData(\"settingsTool\", \"Settings\", <Settings color=\"secondary\" />, (key, name, icon) => <SettingsTool key={key} name={name} icon={icon} />)\r\n\t\t];\r\n\t\tconst toolButtons: React.ReactNode[] = toolDataset.map((toolData: ToolData) => this.renderToolButton(toolData));\r\n\t\tconst activeTool: React.ReactNode = toolDataset.find((toolData: ToolData) => this.state.activeToolKey === toolData.key)?.tool;\r\n\r\n\t\treturn (\r\n\t\t\t<Box className={`${this.props.classes.root} SideMenu`} bgcolor=\"primary.dark\">\r\n\t\t\t\t<Box className=\"ToolButtons\">\r\n\t\t\t\t\t{toolButtons}\r\n\t\t\t\t</Box>\r\n\t\t\t\t{activeTool}\r\n\t\t\t</Box>\r\n\t\t)\r\n\t}\r\n\r\n\tpublic renderToolButton(toolData: ToolData): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ToolButton key={`${toolData.key}Button`} text={toolData.name} isActive={this.state.activeToolKey === toolData.key} onClick={() => this.setState({activeToolKey: toolData.key})}>\r\n\t\t\t\t{toolData.icon}\r\n\t\t\t</ToolButton>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class ToolData\r\n{\r\n\tkey: string;\r\n\tname: string;\r\n\ticon: React.ReactNode;\r\n\ttool: React.ReactNode;\r\n\r\n\tpublic constructor(key: string, name: string, icon: React.ReactNode, renderTool: (key: string, name: string, icon: React.ReactNode) => React.ReactNode)\r\n\t{\r\n\t\tthis.key = key;\r\n\t\tthis.name = name;\r\n\t\tthis.icon = icon;\r\n\t\tthis.tool = renderTool(key, name, icon);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(SideMenu);\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport TileData from \"../TileData\";\r\n\r\nexport interface IProps {\r\n\ttileData: TileData;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class Tile extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\r\n\tconstructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {}\r\n\t}\r\n\r\n\trender(): React.ReactNode\r\n\t{\r\n\t\tconst style = {\r\n\t\t\ttransformOrigin: `${this.props.tileData.size / 2}px ${this.props.tileData.size / 2}px`,\r\n\t\t\ttransform: `rotate(${this.props.tileData.rotation * 90}deg)`\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<svg className=\"Tile\" x={this.props.tileData.position.x * this.props.tileData.size} y={this.props.tileData.position.y * this.props.tileData.size} width={this.props.tileData.size} height={this.props.tileData.size} viewBox={`0,0 1,1`} style={style}>\r\n\t\t\t\t{this.props.tileData.tileType.buildSVG(this.props.tileData)}\r\n\t\t\t\t<rect className=\"TilePointer\" x={0} y={0} width={1} height={1} fill=\"none\" />\r\n\t\t\t</svg>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport AppContext from \"../AppContext\";\r\nimport TileManager from \"../TileManager\";\r\nimport Tile from \"./Tile\"\r\n\r\nexport interface IProps\r\n{\r\n\ttileManager: TileManager;\r\n}\r\n\r\nexport interface IState {}\r\n\r\nexport default class GridTiles extends React.Component<IProps, IState>\r\n{\r\n\tstatic contextType = AppContext;\r\n\tpublic static defaultProps = {}\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<g className=\"GridTiles\">\r\n\t\t\t\t{this.props.tileManager.placedTiles.map((tileData, tileDataID) => <Tile key={tileDataID} tileData={tileData} />)}\r\n\t\t\t</g>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n/*\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(0px, 0px) rotate(0deg)\"}}>\r\n\t<rect width=\"32px\" height=\"32px\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(32px, 0px) rotate(0deg)\"}}>\r\n\t<rect width=\"32px\" height=\"32px\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(0px, 32px) rotate(0deg)\"}}>\r\n\t<rect width=\"32px\" height=\"32px\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n<g className=\"Tile\" width=\"32px\" height=\"32px\" viewBox=\"0,0 32,32\" style={{transformOrigin: \"16px 16px\", transform: \"translate(32px, 32px) rotate(0deg)\"}}>\r\n\t<circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"white\" />\r\n\t<rect className=\"TilePointer\" x=\"0\" y=\"0\" width=\"32px\" height=\"32px\" fill=\"none\" />\r\n</g>\r\n*/\r\n","import React from \"react\";\r\nimport $ from \"jquery\";\r\nimport GridTiles from \"./GridTiles\";\r\nimport AppContext from \"../AppContext\";\r\nimport Vector2D from \"../Vector2D\";\r\nimport {WithStyles, createStyles, withStyles} from \"@material-ui/core\";\r\nimport {generateUniqueID, clamp} from \"../util\";\r\nimport TileManager, {TilePlacedEvent, TileErasedEvent} from \"../TileManager\";\r\n\r\nconst styles = () => createStyles({\r\n\troot: {\r\n\t\tposition: \"static\",\r\n\t\tbackgroundColor: \"#0e0e10\"\r\n\t}\r\n});\r\n\r\nexport interface IProps extends WithStyles<typeof styles>\r\n{\r\n\toffsetIncrement: number;\r\n\tzoomIncrement: number;\r\n\tzoomMultiplier: number;\r\n\tzoomOffsetMultiplier: number;\r\n\tzoomMinimum: number,\r\n\tzoomMaximum: number,\r\n\tgridSizeMinimum: number;\r\n\tgridSizeMaximum: number;\r\n\ttileManager: TileManager;\r\n}\r\n\r\nexport interface IState\r\n{\r\n\tuniqueID: string;\r\n\tgridSize: number;\r\n\tzoom: number;\r\n\toffset: Vector2D;\r\n\tsize: Vector2D;\r\n\tcolor1: string;\r\n\tcolor2: string;\r\n}\r\n\r\nclass Grid extends React.Component<IProps, IState>\r\n{\r\n\tpublic static contextType = AppContext;\r\n\tpublic static defaultProps = {\r\n\t\toffsetIncrement: 32,\r\n\t\tzoomIncrement: 120,\r\n\t\tzoomMultiplier: 0.002,\r\n\t\tzoomOffsetMultiplier: 0.24,\r\n\t\tzoomMinimum: 0.064,\r\n\t\tzoomMaximum: 4,\r\n\t\tgridSizeMinimum: 2,\r\n\t\tgridSizeMaximum: 128\r\n\t}\r\n\r\n\tprivate _svg: React.RefObject<SVGSVGElement>;\r\n\tprivate _isDragging: boolean = false;\r\n\tprivate _dragCursorOffset: Vector2D = new Vector2D(0, 0);\r\n\tprivate _dragOffset: Vector2D = new Vector2D(0, 0);\r\n\r\n\tpublic constructor(props: IProps)\r\n\t{\r\n\t\tsuper(props);\r\n\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\t\tconst windowSize: Vector2D = new Vector2D($window.width()!,  $window.height()!);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuniqueID: generateUniqueID(\"grid\"),\r\n\t\t\tgridSize: 32,\r\n\t\t\tzoom: 1,\r\n\t\t\toffset: new Vector2D(0, 0),\r\n\t\t\tsize: windowSize,\r\n\t\t\tcolor1: \"#202124\",\r\n\t\t\tcolor2: \"#303136\"\r\n\t\t};\r\n\r\n\t\tthis._svg = React.createRef();\r\n\t}\r\n\r\n\tpublic render(): React.ReactNode\r\n\t{\r\n\t\tconst offset: Vector2D = this.state.offset.copy().add(this.state.size.copy().divide(2).multiply(this.state.zoom));\r\n\t\tconst size: Vector2D = this.state.size.copy().multiply(this.state.zoom);\r\n\r\n\t\treturn (\r\n\t\t\t<svg className={`${this.props.classes.root} Grid`} ref={this._svg} xmlns=\"http://www.w3.org/2000/svg\" width={`${this.state.size.x}px`} height={`${this.state.size.y}px`} viewBox={`${-offset.x},${-offset.y} ${size.x},${size.y}`} onMouseDown={this._svg_OnMouseDown_StartDragging} onMouseMove={this._svg_OnMouseMove_Drag}>\r\n\t\t\t\t{this.renderDefs()}\r\n\t\t\t\t{this.renderGrid(offset, size)}\r\n\t\t\t\t<GridTiles tileManager={this.props.tileManager} />\r\n\t\t\t</svg>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderDefs(): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<defs>\r\n\t\t\t\t<pattern id={`${this.state.uniqueID}_pattern1`} width={this.state.gridSize} height={this.state.gridSize} patternUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t<rect width={`${this.state.gridSize}px`} height={`${this.state.gridSize}px`} fill=\"none\" stroke={this.state.color1} strokeWidth=\"1\" />\r\n\t\t\t\t</pattern>\r\n\t\t\t\t<pattern id={`${this.state.uniqueID}_pattern2`} width={`${this.props.gridSizeMaximum}px`} height={`${this.props.gridSizeMaximum}px`} patternUnits=\"userSpaceOnUse\">\r\n\t\t\t\t\t<rect width={`${this.props.gridSizeMaximum}px`} height={`${this.props.gridSizeMaximum}px`} fill={`url(#${this.state.uniqueID}_pattern1)`} />\r\n\t\t\t\t\t<rect width={`${this.props.gridSizeMaximum}px`} height={`${this.props.gridSizeMaximum}px`} fill=\"none\" stroke={this.state.color1} strokeWidth=\"3\" />\r\n\t\t\t\t</pattern>\r\n\t\t\t</defs>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderGrid(offset: Vector2D, size: Vector2D): React.ReactNode\r\n\t{\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<rect id={`${this.state.uniqueID}_rect1`} x={`${-offset.x}px`} y={`${-offset.y}px`} width=\"100%\" height=\"100%\" fill={`url(#${this.state.uniqueID}_pattern2)`} />\r\n\t\t\t\t<line id={`${this.state.uniqueID}_line1`} x1={`${-offset.x}px`} y1=\"0\" x2={`${-offset.x + size.x}px`} y2=\"0\" stroke={this.state.color2} strokeWidth=\"3\" />\r\n\t\t\t\t<line id={`${this.state.uniqueID}_line2`} x1=\"0\" y1={`${-offset.y}px`} x2=\"0\" y2={`${-offset.y + size.y}px`} stroke={this.state.color2} strokeWidth=\"3\" />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic componentDidMount(): void\r\n\t{\r\n\t\tconst $document: JQuery<Document> = $(document);\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\t\tconst $svg: JQuery<SVGSVGElement> = $(this._svg.current!);\r\n\r\n\t\tthis.props.tileManager.tilePlacedEmitter.on(this._tileManager_TilePlacedEmitter_ForceUpdate);\r\n\t\tthis.props.tileManager.tileErasedEmitter.on(this._tileManager_TileErasedEmitter_ForceUpdate);\r\n\t\t$document.on(\"mouseup\", this._document_MouseUp_StopDragging);\r\n\t\t$document.on(\"keydown\", this._document_KeyDown_Hotkeys);\r\n\t\t$window.on(\"resize\", this._window_Resize_SetSize);\r\n\t\t$svg.on(\"mousewheel\", this._svg_MouseWheel_Zoom);\r\n\t}\r\n\r\n\tpublic componentWillUnmount(): void\r\n\t{\r\n\t\tconst $document: JQuery<Document> = $(document);\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\t\tconst $svg: JQuery<SVGSVGElement> = $(this._svg.current!);\r\n\r\n\t\tthis.props.tileManager.tilePlacedEmitter.off(this._tileManager_TilePlacedEmitter_ForceUpdate);\r\n\t\tthis.props.tileManager.tileErasedEmitter.off(this._tileManager_TileErasedEmitter_ForceUpdate);\r\n\t\t$document.off(\"mouseup\", this._document_MouseUp_StopDragging);\r\n\t\t$document.off(\"keydown\", this._document_KeyDown_Hotkeys);\r\n\t\t$window.off(\"resize\", this._window_Resize_SetSize);\r\n\t\t$svg.off(\"mousewheel\", this._svg_MouseWheel_Zoom);\r\n\t}\r\n\r\n\tpublic addZoom(zoomAdd: number): void\r\n\t{\r\n\t\tthis.setState({\r\n\t\t\tzoom: clamp(this.state.zoom - zoomAdd * this.state.zoom * this.props.zoomMultiplier, this.props.zoomMinimum, this.props.zoomMaximum)\r\n\t\t});\r\n\t}\r\n\r\n\tpublic positionToGrid(position: Vector2D): Vector2D\r\n\t{\r\n\t\treturn new Vector2D(\r\n\t\t\tMath.floor(position.x / this.state.gridSize),\r\n\t\t\tMath.floor(position.y / this.state.gridSize)\r\n\t\t)\r\n\t}\r\n\r\n\tpublic gridToPosition(gridPosition: Vector2D): Vector2D\r\n\t{\r\n\t\treturn gridPosition.copy().multiply(this.state.gridSize);\r\n\t}\r\n\r\n\t_tileManager_TilePlacedEmitter_ForceUpdate = (event: TilePlacedEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\t_tileManager_TileErasedEmitter_ForceUpdate = (event: TileErasedEvent) =>\r\n\t{\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\tprivate _svg_MouseWheel_Zoom = (event: any) =>\r\n\t{\r\n\t\tif(event.ctrlKey)\r\n\t\t{\r\n\t\t\tif((event.originalEvent.wheelDelta > 0 && this.state.zoom > this.props.zoomMinimum) || (event.originalEvent.wheelDelta < 0 && this.state.zoom < this.props.zoomMaximum))\r\n\t\t\t{\r\n\t\t\t\tconst $window = $(window);\r\n\t\t\t\tconst add = new Vector2D(\r\n\t\t\t\t\t(event.offsetX - ($window.width()! / 2)) * this.state.zoom * this.props.zoomOffsetMultiplier,\r\n\t\t\t\t\t(event.offsetY - ($window.height()! / 2)) * this.state.zoom * this.props.zoomOffsetMultiplier\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: event.originalEvent.wheelDelta > 0 ? this.state.offset.copy().subtract(add) : this.state.offset.copy().add(add)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.addZoom(event.originalEvent.wheelDelta);\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _svg_OnMouseDown_StartDragging = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(event.button === 1)\r\n\t\t{\r\n\t\t\tthis._dragOffset.x = this.state.offset.x;\r\n\t\t\tthis._dragOffset.y = this.state.offset.y;\r\n\t\t\tthis._dragCursorOffset.x = event.nativeEvent.offsetX;\r\n\t\t\tthis._dragCursorOffset.y = event.nativeEvent.offsetY;\r\n\t\t\tthis._isDragging = true;\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _document_MouseUp_StopDragging = (event: JQuery.MouseUpEvent) =>\r\n\t{\r\n\t\tthis._isDragging = false;\r\n\t}\r\n\r\n\tprivate _svg_OnMouseMove_Drag = (event: React.MouseEvent) =>\r\n\t{\r\n\t\tif(this._isDragging)\r\n\t\t{\r\n\t\t\tthis.setState({\r\n\t\t\t\toffset: new Vector2D(\r\n\t\t\t\t\tthis._dragOffset.x + (event.nativeEvent.offsetX - this._dragCursorOffset.x) * this.state.zoom,\r\n\t\t\t\t\tthis._dragOffset.y + (event.nativeEvent.offsetY - this._dragCursorOffset.y) * this.state.zoom\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _document_KeyDown_Hotkeys = (event: JQuery.KeyDownEvent) =>\r\n\t{\r\n\t\tswitch(event.key)\r\n\t\t{\r\n\t\t\tcase \"ArrowLeft\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x + this.props.offsetIncrement, this.state.offset.y)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"ArrowUp\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x, this.state.offset.y + this.props.offsetIncrement)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"ArrowRight\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x - this.props.offsetIncrement, this.state.offset.y)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"ArrowDown\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toffset: new Vector2D(this.state.offset.x, this.state.offset.y - this.props.offsetIncrement)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"w\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tgridSize: Math.min(this.state.gridSize * 2, this.props.gridSizeMaximum)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"s\":\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tgridSize: Math.max(this.state.gridSize / 2, this.props.gridSizeMinimum)\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"+\":\r\n\t\t\t\tif(event.ctrlKey)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.addZoom(this.props.zoomIncrement);\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"-\":\r\n\t\t\t\tif(event.ctrlKey)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.addZoom(-this.props.zoomIncrement);\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _window_Resize_SetSize = (event: JQuery.ResizeEvent) =>\r\n\t{\r\n\t\tconst $window: JQuery<Window> = $(window);\r\n\r\n\t\tthis.setState({\r\n\t\t\tsize: new Vector2D($window.width()!, $window.height()!)\r\n\t\t});\r\n\t}\r\n\r\n\t/*\r\n\tupdateColor(colorIndex, color)\r\n\t{\r\n\t\tthis.html.find(`> g[color-index=\"${colorIndex}\"] > :not(.tile-pointer)`).attr(\"fill\", color);\r\n\t}\r\n\r\n\tcursorToView(cursorPosition)\r\n\t{\r\n\t\treturn new Vector2D(\r\n\t\t\t(cursorPosition.x - this.offset.x) * (this.zoom / this.html.width()),\r\n\t\t\t(cursorPosition.y - this.offset.y) * (this.zoom / this.html.height())\r\n\t\t);\r\n\t}\r\n\t*/\r\n}\r\n\r\nexport default withStyles(styles)(Grid);\r\n","\r\nexport class Event {}\r\n\r\nexport interface Callback<T>\r\n{\r\n\t(event: T): void;\r\n}\r\n\r\nexport default class Emitter<T extends Event = Event>\r\n{\r\n\t_callbacks: Map<Callback<T>, boolean> = new Map<Callback<T>, boolean>();\r\n\r\n\ton(onEmit: Callback<T>): void\r\n\t{\r\n\t\tthis._callbacks.set(onEmit, true);\r\n\t}\r\n\r\n\toff(onEmit: Callback<T>): void\r\n\t{\r\n\t\tthis._callbacks.delete(onEmit);\r\n\t}\r\n\r\n\tonce(onEmit: Callback<T>): void\r\n\t{\r\n\t\tthis.on((event: T) =>\r\n\t\t{\r\n\t\t\tonEmit(event);\r\n\t\t\tthis.off(onEmit);\r\n\t\t});\r\n\t}\r\n\r\n\temit(event: Event = new Event()): T\r\n\t{\r\n\t\tconst tEvent: T = event as T;\r\n\r\n\t\tfor(const onEmit of Array.from(this._callbacks.keys()))\r\n\t\t{\r\n\t\t\tonEmit(tEvent);\r\n\t\t}\r\n\r\n\t\treturn tEvent;\r\n\t}\r\n}\r\n","import Emitter, {Event} from \"./Emitter\";\r\n\r\nexport class ColorChangeEvent extends Event\r\n{\r\n\tcolorID: number;\r\n\tcolor: string;\r\n\r\n\tconstructor(colorID: number, color: string)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.colorID = colorID;\r\n\t\tthis.color = color;\r\n\t}\r\n}\r\n\r\nexport class SelectedColorIDChangeEvent extends Event\r\n{\r\n\tselectedColorID: number;\r\n\r\n\tconstructor(selectedColorID: number)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.selectedColorID = selectedColorID;\r\n\t}\r\n}\r\n\r\nexport default class PaletteManager\r\n{\r\n\tpublic colors: string[];\r\n\tpublic colorChangeEmitter: Emitter<ColorChangeEvent> = new Emitter<ColorChangeEvent>();\r\n\tpublic selectedColorIDChangeEmitter: Emitter<SelectedColorIDChangeEvent> = new Emitter<SelectedColorIDChangeEvent>();\r\n\tprivate _selectedColorID: number = 0;\r\n\tprivate _defaultColor: string = \"#ffffff\";\r\n\r\n\tset selectedColorID(colorID: number)\r\n\t{\r\n\t\tconst selectedColorIDChangeEvent = this.selectedColorIDChangeEmitter.emit(new SelectedColorIDChangeEvent(colorID));\r\n\t\tthis._selectedColorID = selectedColorIDChangeEvent.selectedColorID;\r\n\t}\r\n\r\n\tget selectedColorID()\r\n\t{\r\n\t\treturn this._selectedColorID;\r\n\t}\r\n\r\n\tget selectedColor()\r\n\t{\r\n\t\treturn this.colors[this.selectedColorID];\r\n\t}\r\n\r\n\tconstructor(colors: string[] = [])\r\n\t{\r\n\t\tthis.colors = colors;\r\n\r\n\t\tif(this.colors.length === 0)\r\n\t\t{\r\n\t\t\tthis.addColor();\r\n\t\t}\r\n\t}\r\n\r\n\taddColor()\r\n\t{\r\n\t\tthis.setColor(this.colors.length, this._defaultColor);\r\n\t}\r\n\r\n\tsetColor(colorID: number, color: string)\r\n\t{\r\n\t\tconst colorChangeEvent = this.colorChangeEmitter.emit(new ColorChangeEvent(colorID, color));\r\n\t\tthis.colors[colorChangeEvent.colorID] = colorChangeEvent.color;\r\n\t}\r\n}\r\n","import TileData from \"./TileData\";\r\nimport Emitter, {Event} from \"./Emitter\";\r\nimport Tileset from \"./Tileset\";\r\nimport TileType from \"./TileType\";\r\n\r\nexport class TilePlacedEvent extends Event\r\n{\r\n\ttileID: number;\r\n\ttileData: TileData;\r\n\r\n\tconstructor(tileID: number, tileData: TileData)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.tileID = tileID;\r\n\t\tthis.tileData = tileData;\r\n\t}\r\n}\r\n\r\nexport class TileErasedEvent extends Event\r\n{\r\n\ttileID: number;\r\n\r\n\tconstructor(tileID: number)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.tileID = tileID;\r\n\t}\r\n}\r\n\r\nexport class SelectedTilesetChangedEvent extends Event\r\n{\r\n\ttileset: Tileset;\r\n\r\n\tconstructor(tileset: Tileset)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.tileset = tileset;\r\n\t}\r\n}\r\n\r\nexport class SelectedTileTypeChangedEvent extends Event\r\n{\r\n\ttileType: TileType;\r\n\r\n\tconstructor(tileType: TileType)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.tileType = tileType;\r\n\t}\r\n}\r\n\r\nexport default class TileManager\r\n{\r\n\tpublic tilesets: Tileset[];\r\n\tpublic placedTiles: TileData[] = [];\r\n\tpublic tilePlacedEmitter: Emitter<TilePlacedEvent> = new Emitter<TilePlacedEvent>();\r\n\tpublic tileErasedEmitter: Emitter<TileErasedEvent> = new Emitter<TileErasedEvent>();\r\n\tpublic selectedTilesetChangedEmitter: Emitter<SelectedTilesetChangedEvent> = new Emitter<SelectedTilesetChangedEvent>();\r\n\tpublic selectedTileTypeChangedEmitter: Emitter<SelectedTileTypeChangedEvent> = new Emitter<SelectedTileTypeChangedEvent>();\r\n\tprivate _selectedTileset: Tileset;\r\n\tprivate _selectedTileType: TileType;\r\n\tprivate _currentTileID: number = 0;\r\n\r\n\tset selectedTileset(value: Tileset)\r\n\t{\r\n\t\tconst selectedTilesetChangedEvent = this.selectedTilesetChangedEmitter.emit(new SelectedTilesetChangedEvent(value));\r\n\t\tthis._selectedTileset = selectedTilesetChangedEvent.tileset;\r\n\t}\r\n\r\n\tget selectedTileset(): Tileset\r\n\t{\r\n\t\treturn this._selectedTileset;\r\n\t}\r\n\r\n\tset selectedTileType(value: TileType)\r\n\t{\r\n\t\tconst selectedTileTypeChangedEvent = this.selectedTileTypeChangedEmitter.emit(new SelectedTileTypeChangedEvent(value));\r\n\t\tthis._selectedTileType = selectedTileTypeChangedEvent.tileType;\r\n\t}\r\n\r\n\tget selectedTileType(): TileType\r\n\t{\r\n\t\treturn this._selectedTileType;\r\n\t}\r\n\r\n\tconstructor(tilesets: Tileset[])\r\n\t{\r\n\t\tthis.tilesets = tilesets;\r\n\t\tthis._selectedTileset = tilesets[0];\r\n\t\tthis._selectedTileType = this.selectedTileset.tileTypes[0];\r\n\t}\r\n\r\n\tplaceTile(tileData: TileData): number\r\n\t{\r\n\t\tconst tilePlacedEvent = this.tilePlacedEmitter.emit(new TilePlacedEvent(this._currentTileID++, tileData));\r\n\t\tthis.placedTiles[tilePlacedEvent.tileID] = tilePlacedEvent.tileData;\r\n\r\n\t\treturn tilePlacedEvent.tileID;\r\n\t}\r\n\r\n\teraseTile(tileID: number): TileData\r\n\t{\r\n\t\tconst tileErasedEvent = this.tileErasedEmitter.emit(new TileErasedEvent(tileID));\r\n\t\tconst tileData = this.placedTiles[tileErasedEvent.tileID];\r\n\r\n\t\tdelete this.placedTiles[tileErasedEvent.tileID];\r\n\r\n\t\treturn tileData;\r\n\t}\r\n}\r\n","import React from \"react\";\nimport $ from \"jquery\";\nimport SideMenu from \"./SideMenu\";\nimport Grid from \"./Grid\";\nimport Tileset from \"../Tileset\";\nimport PaletteManager from \"../PaletteManager\";\nimport AppContext, {IAppContext} from \"../AppContext\";\nimport {ThemeProvider} from \"@material-ui/styles\";\nimport {Box, Theme, WithStyles, createStyles, withStyles} from \"@material-ui/core\";\nimport TileManager from \"../TileManager\";\n\nconst styles = () => createStyles({\n\troot: {\n\t\tuserSelect: \"none\"\n\t}\n});\n\nexport interface IProps extends WithStyles<typeof styles>\n{\n\ttheme: Theme;\n\ttilesets: Tileset[];\n\tdefaultPaletteColors: string[];\n}\n\nexport interface IState\n{\n\tpaletteManager: PaletteManager;\n\ttileManager: TileManager;\n}\n\nclass App extends React.Component<IProps, IState>\n{\n\tprivate _appContext: IAppContext;\n\n\tconstructor(props: IProps)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpaletteManager: new PaletteManager(this.props.defaultPaletteColors),\n\t\t\ttileManager: new TileManager(this.props.tilesets)\n\t\t};\n\n\t\tthis._appContext = {\n\t\t\ttheme: this.props.theme\n\t\t}\n\t}\n\n\trender(): React.ReactNode\n\t{\n\t\treturn (\n\t\t\t<AppContext.Provider value={this._appContext}>\n\t\t\t\t<ThemeProvider theme={this.props.theme}>\n\t\t\t\t\t<Box className={`${this.props.classes.root} App`}>\n\t\t\t\t\t\t{this.renderContent()}\n\t\t\t\t\t\t<SideMenu paletteManager={this.state.paletteManager} tileManager={this.state.tileManager} />\n\t\t\t\t\t</Box>\n\t\t\t\t</ThemeProvider>\n\t\t\t</AppContext.Provider>\n\t\t);\n\t}\n\n\trenderContent(): React.ReactNode\n\t{\n\t\treturn (\n\t\t\t<Box className=\"Content\">\n\t\t\t\t<Grid tileManager={this.state.tileManager} />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\t$(document.documentElement).css({\n\t\t\t\"--theme-primary-main\": this.props.theme.palette.primary.main,\n\t\t\t\"--theme-primary-light\": this.props.theme.palette.primary.light,\n\t\t\t\"--theme-primary-dark\": this.props.theme.palette.primary.dark,\n\t\t\t\"--theme-secondary-main\": this.props.theme.palette.secondary.main,\n\t\t\t\"--theme-secondary-light\": this.props.theme.palette.secondary.light,\n\t\t\t\"--theme-secondary-dark\": this.props.theme.palette.secondary.dark,\n\t\t\t\"--theme-text-primary\": this.props.theme.palette.text.primary,\n\t\t\t\"--theme-text-secondary\": this.props.theme.palette.text.secondary\n\t\t});\n\t}\n}\n\nexport default withStyles(styles)(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {createMuiTheme, responsiveFontSizes} from \"@material-ui/core/styles\";\r\nimport {PaletteType} from \"@material-ui/core\";\r\n\r\nfunction createTheme(type: PaletteType, primaryColor: string, secondaryColor: string)\r\n{\r\n\tlet theme = createMuiTheme({\r\n\t\tpalette: {\r\n\t\t\ttype: type,\r\n\t\t\tprimary: {\r\n\t\t\t\tmain: primaryColor\r\n\t\t\t},\r\n\t\t\tsecondary: {\r\n\t\t\t\tmain: secondaryColor\r\n\t\t\t},\r\n\t\t\ttext: {\r\n\t\t\t\tprimary: secondaryColor,\r\n\t\t\t\tsecondary: primaryColor\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\ttheme = responsiveFontSizes(theme);\r\n\r\n\treturn theme;\r\n}\r\n\r\nexport default createTheme(\"dark\", \"#1f2f46\", \"#79c0ff\");","import TileData from \"./TileData\";\r\n\r\nexport default class TileType\r\n{\r\n\tid: string;\r\n\tbuildSVG: (tileData: TileData) => React.ReactNode;\r\n\r\n\tconstructor(id: string, buildSVG: (tileData: TileData) => React.ReactNode)\r\n\t{\r\n\t\tthis.id = id;\r\n\t\tthis.buildSVG = buildSVG;\r\n\t}\r\n}\r\n","import Tileset from \"../Tileset\";\r\nimport TileType from \"../TileType\";\r\n\r\nconst tilesets: Tileset[] = [\r\n\tnew Tileset(\"Basic\", [\r\n\t\tnew TileType(\"tile1\", (tileData) => <rect width={1} height={1} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile2\", (tileData) => <path d={`M0.5,0 L1,0 L1,1 L0,1 L0,0.5 Z`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile3\", (tileData) => <path d={`M1,0 L1,1 L0,1 Z`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile4\", (tileData) => <path d={`M0.5,0 L1,0 L1,1 L0,1 L0,0.5 A 0.5,0.5 0 0 1 0.5,0 Z`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile5\", (tileData) => <path d={`M1,0 L1,1 L0,1 A 1,1 0 0 1 1,0 Z`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile6\", (tileData) => <path d={`M0.5,0 L1,0 L1,1 L0,1 L0,0.5 A 0.5,0.5 0 0 0 0.5,0 Z`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile7\", (tileData) => <path d={`M1,0 L1,1 L0,1 A 1,1 0 0 0 1,0 Z`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile8\", (tileData) => <circle cx={0.5} cy={0.5} r={0.5} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile9\", (tileData) => (\r\n\t\t\t<g>\r\n\t\t\t\t<path d={`M0,0.5 L0,0 L0.5,0 A 0.5,0.5,0 0 0 0 0.5,Z`} fill={tileData.color} />\r\n\t\t\t\t<path d={`M1,0.5 A 0.5,0.5 0 0 0 0.5,0 L1,0 Z`} fill={tileData.color} />\r\n\t\t\t\t<path d={`M1,0.5 L1,1 L0.5,1 A 0.5,0.5 0 0 0 1,0.5 Z`} fill={tileData.color} />\r\n\t\t\t\t<path d={`M0,0.5 A 0.5,0.5 0 0 0 0.5,1 L0,1 Z`} fill={tileData.color} />\r\n\t\t\t</g>\r\n\t\t)),\r\n\t\tnew TileType(\"tile10\", (tileData) => <polygon points={`0.5,0 1,1 0,1`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile11\", (tileData) => (\r\n\t\t\t<g>\r\n\t\t\t\t<polygon points={`0.25,0 0.5,1 0,1`} fill={tileData.color} />\r\n\t\t\t\t<polygon points={`0.75,0 1,1 0.5,1`} fill={tileData.color} />\r\n\t\t\t</g>\r\n\t\t)),\r\n\t\tnew TileType(\"tile12\", (tileData) => <polygon points={`0.5,0.5 1,1 0,1`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile13\", (tileData) => (\r\n\t\t\t<g>\r\n\t\t\t\t<polygon points={`0.25,0.5 0.5,1 0,1`} fill={tileData.color} />\r\n\t\t\t\t<polygon points={`0.75,0.5 1,1 0.5,1`} fill={tileData.color} />\r\n\t\t\t</g>\r\n\t\t)),\r\n\t\tnew TileType(\"tile14\", (tileData) => <polygon points={`0,0 0.5,1 1,0 1,1 0,1`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile15\", (tileData) => <polygon points={`0,0 0.25,1 0.5,0 0.75,1 1,0 1,1 0,1`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile16\", (tileData) => <polygon points={`0,0 0.5,0.5 1,0 1,1 0,1`} fill={tileData.color} />),\r\n\t\tnew TileType(\"tile17\", (tileData) => <polygon points={`0,0 0.25,0.5 0.5,0 0.75,0.5 1,0 1,1 0,1`} fill={tileData.color} />)\r\n\t])\r\n];\r\nexport default tilesets;\r\n","import TileType from \"./TileType\";\r\n\r\nexport default class Tileset\r\n{\r\n\tpublic name: string;\r\n\tpublic tileTypes: TileType[];\r\n\r\n\tconstructor(name: string, tileTypes: TileType[])\r\n\t{\r\n\t\tthis.name = name;\r\n\t\tthis.tileTypes = tileTypes;\r\n\t}\r\n}\r\n","\r\nconst defaultPaletteColors = [\r\n\t\"#ffffff\",\r\n\t\"#cccccc\",\r\n\t\"#000000\",\r\n\t\"#333333\",\r\n\t\"#925c3a\",\r\n\t\"#784f35\",\r\n\t\"#dc6d1c\",\r\n\t\"#f4dd42\",\r\n\t\"#b23434\",\r\n\t\"#631d1d\",\r\n\t\"#81b93b\",\r\n\t\"#4d893a\",\r\n\t\"#5e81ca\",\r\n\t\"#343d65\",\r\n\t\"#cc00ff\",\r\n\t\"#8f00b3\",\r\n\t\"#ffb3ff\"\r\n];\r\nexport default defaultPaletteColors;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./Components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport theme from \"./data/themes\";\nimport tilesets from \"./data/tilesets\";\nimport defaultPaletteColors from \"./data/defaultPaletteColors\";\nimport \"@fontsource/roboto\";\n\nReactDOM.render(\n\t(\n\t\t<React.StrictMode>\n\t\t\t<App theme={theme} tilesets={tilesets} defaultPaletteColors={defaultPaletteColors} />\n\t\t</React.StrictMode>\n\t),\n\tdocument.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}