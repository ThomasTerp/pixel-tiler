(this["webpackJsonppixel-tiler"]=this["webpackJsonppixel-tiler"]||[]).push([[0],{69:function(e,t,i){"use strict";i.r(t);var o=i(0),n=i.n(o),r=i(13),a=i.n(r),s=i(3),c=i(4),l=i(7),p=i(6),h=i(15),u=i.n(h),d=i(50),f=i(95),m=Object(d.a)();m=Object(f.a)(m);var g=n.a.createContext({theme:m}),b=i(96),j=i(92),v=i(93),x=i(91),y=i(16);var _={};function O(e,t){return t?e:""}var C=i(1),w=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)(j.a,{title:this.props.text,enterDelay:i.tooltipEnterDelay,children:Object(C.jsx)(v.a,{className:"".concat(this.props.classes.root," ToolButton ").concat(O("Active",this.props.isActive)),onClick:this.props.onClick,children:Object(C.jsx)(x.a,{children:this.props.children})})})}}]),i}(n.a.Component);w.contextType=g,w.tooltipEnterDelay=700;var M=Object(y.a)((function(){return Object(b.a)({root:{paddingTop:"100% !important","&.Active":{border:"2px solid",borderColor:"var(--theme-secondary-main)","&:hover":{borderColor:"var(--theme-secondary-main)"}},"&:hover":{border:"2px solid var(--theme-secondary-dark)"},"& div":{display:"flex",position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",justifyContent:"center",alignItems:"center",backgroundColor:"var(--theme-primary-main)","&:hover":{backgroundColor:"var(--theme-primary-dark)"}}}})}))(w),D=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e))._inputRef=void 0,o._allowClick=!1,o._input_OnChange_SetPaletteColor=function(e){o.props.paletteManager.setColor(o.props.colorID,e.target.value)},o._input_OnClick_SelectColorID=function(e){o.props.isSelectable&&(o.props.paletteManager.selectedColorID=o.props.colorID,o._allowClick?o._allowClick=!1:e.preventDefault()),o.props.isEditable||(e.preventDefault(),e.preventDefault())},o._input_OnDoubleClick_OpenMenu=function(e){var t;o.props.isEditable&&o.props.isSelectable&&(o._allowClick=!0,null===(t=o._inputRef.current)||void 0===t||t.click())},o._input_OnContextMenu_OpenMenu=function(e){var t;o.props.isSelectable&&(o._allowClick=!0),null===(t=o._inputRef.current)||void 0===t||t.click(),e.preventDefault()},o.state={},o._inputRef=n.a.createRef(),o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)("div",{className:"".concat(this.props.classes.root," PaletteColor ").concat(O("Selectable",this.props.isSelectable)," ").concat(O("Editable",this.props.isEditable)," ").concat(O("Active",this.isSelected())),children:Object(C.jsx)("div",{children:Object(C.jsx)(v.a,{children:Object(C.jsx)("input",{ref:this._inputRef,style:{backgroundColor:this.props.color},type:"color",defaultValue:this.props.color,onChange:this._input_OnChange_SetPaletteColor,onClick:this._input_OnClick_SelectColorID,onDoubleClick:this._input_OnDoubleClick_OpenMenu,onContextMenu:this._input_OnContextMenu_OpenMenu})})})})}},{key:"isSelected",value:function(){return this.props.paletteManager.selectedColorID===this.props.colorID}}]),i}(n.a.Component);D.contextType=g,D.defaultProps={isEditable:!0,isSelectable:!0};var k=Object(y.a)((function(){return Object(b.a)({root:{width:"calc(100% - 4px)",height:"calc(100% - 4px)",padding:"2px",margin:"0px","&.Selectable":{"&:hover":{backgroundColor:"var(--theme-secondary-dark)"},"&.Active":{backgroundColor:"var(--theme-secondary-main)"},"& > div > button > input":{cursor:"pointer"}},"&.Editable > div > button > input":{cursor:"pointer"},"& > div":{width:"100%","& > button":{position:"relative",left:"0px",width:"100%","& > input":{width:"100%",height:"4px",margin:"0px",padding:"calc(100% - 8px) 0px 0px 0px",cursor:"initial",border:"2px solid var(--theme-primary-dark)"}}}}})}))(D),T=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e))._paletteAddColor_OnClick_AddColor=function(e){o.props.paletteManager.addColor()},o.state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)(j.a,{title:this.props.text,enterDelay:i.tooltipEnterDelay,children:Object(C.jsx)(v.a,{className:"".concat(this.props.classes.root," PaletteAddColor"),onClick:this._paletteAddColor_OnClick_AddColor,children:Object(C.jsx)("div",{children:"+"})})})}}]),i}(n.a.Component);T.contextType=g,T.defaultProps={text:"Add Color"},T.tooltipEnterDelay=700;var S=Object(y.a)((function(){return Object(b.a)({root:{position:"relative",left:"2px",top:"2px",width:"calc(100% - 4px)",height:"0px",padding:"0px",paddingTop:"calc(100% - 8px)",margin:"0px",marginBottom:"4px",border:"2px solid",cursor:"pointer",backgroundColor:"var(--theme-primary-dark)",borderColor:"var(--theme-secondary-main)","&:hover":{backgroundColor:"var(--theme-primary-main)"},"& div":{display:"flex",position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",justifyContent:"center",alignItems:"center",fontSize:"31px",color:"var(--theme-secondary-main)"}}})}))(T),E=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e))._paletteManager_ColorChangeEmitter_ForceUpdate=function(e){o.forceUpdate()},o._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate=function(e){o.forceUpdate()},o.state={},o}return Object(c.a)(i,[{key:"render",value:function(){var e=this;return Object(C.jsxs)(x.a,{className:"".concat(this.props.classes.root," Palette"),children:[this.props.paletteManager.colors.map((function(t,i){return Object(C.jsx)(k,{paletteManager:e.props.paletteManager,colorID:i,color:t,isEditable:e.props.isEditable,isSelectable:e.props.isSelectable},i)})),this.props.isEditable?Object(C.jsx)(S,{paletteManager:this.props.paletteManager}):null]})}},{key:"componentDidMount",value:function(){this.props.paletteManager.colorChangeEmitter.on(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.on(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate)}},{key:"componentWillUnmount",value:function(){this.props.paletteManager.colorChangeEmitter.off(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.off(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate)}}]),i}(n.a.Component);E.contextType=g,E.defaultProps={isEditable:!0,isSelectable:!0};var z=Object(y.a)((function(){return Object(b.a)({root:{display:"grid",gridTemplateColumns:"repeat(6, auto)",gap:"0px",margin:"2px"}})}))(E),I=i(84),U=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsxs)(x.a,{className:"".concat(this.props.classes.root," Tool"),bgcolor:"primary.main",children:[Object(C.jsx)(x.a,{mt:1,mb:1,children:Object(C.jsx)(I.a,{className:"Name",color:"textPrimary",variant:"h5",children:this.props.name})}),Object(C.jsx)(x.a,{className:"Properties",children:this.props.children})]})}}]),i}(n.a.Component);U.contextType=g;var A=Object(y.a)((function(){return Object(b.a)({root:{height:"100%",margin:"0px 4px 0px 4px",overflow:"auto"}})}))(U),F=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)(A,{name:this.props.name,icon:this.props.icon,children:Object(C.jsx)(z,{paletteManager:this.props.paletteManager,isEditable:!0,isSelectable:!1})})}}]),i}(n.a.Component),L=function e(t,i,o,n,r,a){Object(s.a)(this,e),this.tileType=void 0,this.position=void 0,this.size=void 0,this.rotation=void 0,this.color=void 0,this.colorID=void 0,this.tileType=t,this.position=i,this.size=o,this.rotation=n,this.color=r,this.colorID=a},P=function(){function e(t,i){Object(s.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=i}return Object(c.a)(e,[{key:"add",value:function(t){return"number"===typeof t?(this.x+=t,this.y+=t):t instanceof e&&(this.x+=t.x,this.y+=t.y),this}},{key:"subtract",value:function(t){return"number"===typeof t?(this.x-=t,this.y-=t):t instanceof e&&(this.x-=t.x,this.y-=t.y),this}},{key:"multiply",value:function(t){return"number"===typeof t?(this.x*=t,this.y*=t):t instanceof e&&(this.x*=t.x,this.y*=t.y),this}},{key:"divide",value:function(t){return"number"===typeof t?(this.x/=t,this.y/=t):t instanceof e&&(this.x/=t.x,this.y/=t.y),this}},{key:"equal",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"copy",value:function(){return new e(this.x,this.y)}}]),e}();P.zero=new P(0,0),P.up=new P(0,1),P.right=new P(1,0),P.bottom=new P(0,-1),P.left=new P(-1,0);var N=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e))._isDrawing=!1,o._paletteManager_ColorChangeEmitter_ForceUpdate=function(e){o.forceUpdate()},o._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate=function(e){o.forceUpdate()},o._tileManager_SelectedTilesetChangedEmitter_ForceUpdate=function(e){o.forceUpdate()},o._tileManager_SelectedTileTypeChangedEmitter_ForceUpdate=function(e){o.forceUpdate()},o._grid_MouseDown_StartDrawing=function(e){o._isDrawing||0!==e.button||(o._isDrawing=!0)},o._grid_MouseUp_StopDrawing=function(e){o._isDrawing&&0===e.button&&(o._isDrawing=!1)},o._grid_MouseMove_Draw=function(e){o._isDrawing&&o.props.tileManager.placeTile(new L(o.props.tileManager.selectedTileType,new P(e.offsetX,e.offsetY),32,0,o.props.paletteManager.selectedColor,o.props.paletteManager.selectedColorID))},o.state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsxs)(A,{name:this.props.name,icon:this.props.icon,children:[Object(C.jsx)(z,{paletteManager:this.props.paletteManager}),Object(C.jsx)(x.a,{className:"".concat(this.props.classes.tileTypes," TileTypes"),children:this.renderTileTypes()})]})}},{key:"renderTileTypes",value:function(){var e=this;return this.props.tileManager.selectedTileset.tileTypes.map((function(t){return Object(C.jsx)(v.a,{className:"TileType ".concat(O("Active",e.props.tileManager.selectedTileType===t)),onClick:function(){return e.props.tileManager.selectedTileType=t},children:Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0,0 1,1",children:t.buildSVG(new L(t,P.zero,0,0,e.props.paletteManager.selectedColor,e.props.paletteManager.selectedColorID))})},t.id)}))}},{key:"componentDidMount",value:function(){var e=u()(".Grid");this.props.paletteManager.colorChangeEmitter.on(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.on(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate),this.props.tileManager.selectedTilesetChangedEmitter.on(this._tileManager_SelectedTilesetChangedEmitter_ForceUpdate),this.props.tileManager.selectedTileTypeChangedEmitter.on(this._tileManager_SelectedTileTypeChangedEmitter_ForceUpdate),e.on("mousedown",this._grid_MouseDown_StartDrawing),e.on("mouseup",this._grid_MouseUp_StopDrawing),e.on("mousemove",this._grid_MouseMove_Draw)}},{key:"componentWillUnmount",value:function(){var e=u()(".Grid");this.props.paletteManager.colorChangeEmitter.off(this._paletteManager_ColorChangeEmitter_ForceUpdate),this.props.paletteManager.selectedColorIDChangeEmitter.off(this._paletteManager_SelectedColorIDChangeEmitter_ForceUpdate),this.props.tileManager.selectedTilesetChangedEmitter.off(this._tileManager_SelectedTilesetChangedEmitter_ForceUpdate),this.props.tileManager.selectedTileTypeChangedEmitter.off(this._tileManager_SelectedTileTypeChangedEmitter_ForceUpdate),e.off("mousedown",this._grid_MouseDown_StartDrawing),e.off("mouseup",this._grid_MouseUp_StopDrawing),e.off("mousemove",this._grid_MouseMove_Draw)}}]),i}(n.a.Component),Z=Object(y.a)((function(){return Object(b.a)({tileTypes:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gridGap:"2px",margin:"2px","& > .TileType":{boxSizing:"border-box",width:"100%",padding:"2px","&:hover":{backgroundColor:"var(--theme-secondary-dark)"},"&.Active":{backgroundColor:"var(--theme-secondary-main)"}}}})}))(N),B=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)(A,{name:this.props.name,icon:this.props.icon})}}]),i}(n.a.Component),G=i(94),R=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)(A,{name:this.props.name,icon:this.props.icon,children:Object(C.jsx)(G.a,{})})}}]),i}(n.a.Component),K=i(85),W=i(86),q=i(87),V=i(88),X=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={activeToolKey:"brushTool"},o}return Object(c.a)(i,[{key:"render",value:function(){var e,t=this,i=[new Y("fileTool","File",Object(C.jsx)(K.a,{color:"secondary"}),(function(e,i,o){return Object(C.jsx)(F,{name:i,icon:o,paletteManager:t.props.paletteManager},e)})),new Y("brushTool","Brush Tool",Object(C.jsx)(W.a,{color:"secondary"}),(function(e,i,o){return Object(C.jsx)(Z,{name:i,icon:o,paletteManager:t.props.paletteManager,tileManager:t.props.tileManager},e)})),new Y("eraserTool","Eraser Tool",Object(C.jsx)(q.a,{color:"secondary"}),(function(e,t,i){return Object(C.jsx)(B,{name:t,icon:i},e)})),new Y("settingsTool","Settings",Object(C.jsx)(V.a,{color:"secondary"}),(function(e,t,i){return Object(C.jsx)(R,{name:t,icon:i},e)}))],o=i.map((function(e){return t.renderToolButton(e)})),n=null===(e=i.find((function(e){return t.state.activeToolKey===e.key})))||void 0===e?void 0:e.tool;return Object(C.jsxs)(x.a,{className:"".concat(this.props.classes.root," SideMenu"),bgcolor:"primary.dark",children:[Object(C.jsx)(x.a,{className:"ToolButtons",children:o}),n]})}},{key:"renderToolButton",value:function(e){var t=this;return Object(C.jsx)(M,{text:e.name,isActive:this.state.activeToolKey===e.key,onClick:function(){return t.setState({activeToolKey:e.key})},children:e.icon},"".concat(e.key,"Button"))}}]),i}(n.a.Component);X.contextType=g,X.defaultProps={};var Y=function e(t,i,o,n){Object(s.a)(this,e),this.key=void 0,this.name=void 0,this.icon=void 0,this.tool=void 0,this.key=t,this.name=i,this.icon=o,this.tool=n(t,i,o)},H=Object(y.a)((function(){return Object(b.a)({root:{display:"grid",gridTemplateRows:"fit-content(100%) auto",position:"fixed",left:"0px",top:"0px",height:"100%",width:"260px",zIndex:200,textAlign:"center","& .ToolButtons":{display:"grid",gridAutoFlow:"column",gridAutoColumns:"minmax(0, 1fr)",gap:"4px",margin:"4px"}}})}))(X),J=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={},o}return Object(c.a)(i,[{key:"render",value:function(){var e={transformOrigin:"".concat(this.props.tileData.size/2,"px ").concat(this.props.tileData.size/2,"px"),transform:"rotate(".concat(90*this.props.tileData.rotation,"deg)")};return Object(C.jsxs)("svg",{className:"Tile",x:this.props.tileData.position.x*this.props.tileData.size,y:this.props.tileData.position.y*this.props.tileData.size,width:this.props.tileData.size,height:this.props.tileData.size,viewBox:"0,0 1,1",style:e,children:[this.props.tileData.tileType.buildSVG(this.props.tileData),Object(C.jsx)("rect",{className:"TilePointer",x:0,y:0,width:1,height:1,fill:"none"})]})}}]),i}(n.a.Component);J.contextType=g;var Q=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e)).state={},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)("g",{className:"GridTiles",children:this.props.tileManager.placedTiles.map((function(e,t){return Object(C.jsx)(J,{tileData:e},t)}))})}}]),i}(n.a.Component);Q.contextType=g,Q.defaultProps={};var $=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;Object(s.a)(this,i),(o=t.call(this,e))._svg=void 0,o._isDragging=!1,o._dragCursorOffset=new P(0,0),o._dragOffset=new P(0,0),o._tileManager_TilePlacedEmitter_ForceUpdate=function(e){o.forceUpdate()},o._tileManager_TileErasedEmitter_ForceUpdate=function(e){o.forceUpdate()},o._svg_MouseWheel_Zoom=function(e){if(e.ctrlKey){if(e.originalEvent.wheelDelta>0&&o.state.zoom>o.props.zoomMinimum||e.originalEvent.wheelDelta<0&&o.state.zoom<o.props.zoomMaximum){var t=u()(window),i=new P((e.offsetX-t.width()/2)*o.state.zoom*o.props.zoomOffsetMultiplier,(e.offsetY-t.height()/2)*o.state.zoom*o.props.zoomOffsetMultiplier);o.setState({offset:e.originalEvent.wheelDelta>0?o.state.offset.copy().subtract(i):o.state.offset.copy().add(i)})}o.addZoom(e.originalEvent.wheelDelta),e.preventDefault()}},o._svg_OnMouseDown_StartDragging=function(e){1===e.button&&(o._dragOffset.x=o.state.offset.x,o._dragOffset.y=o.state.offset.y,o._dragCursorOffset.x=e.nativeEvent.offsetX,o._dragCursorOffset.y=e.nativeEvent.offsetY,o._isDragging=!0,e.preventDefault())},o._document_MouseUp_StopDragging=function(e){o._isDragging=!1},o._svg_OnMouseMove_Drag=function(e){o._isDragging&&o.setState({offset:new P(o._dragOffset.x+(e.nativeEvent.offsetX-o._dragCursorOffset.x)*o.state.zoom,o._dragOffset.y+(e.nativeEvent.offsetY-o._dragCursorOffset.y)*o.state.zoom)})},o._document_KeyDown_Hotkeys=function(e){switch(e.key){case"ArrowLeft":o.setState({offset:new P(o.state.offset.x+o.props.offsetIncrement,o.state.offset.y)});break;case"ArrowUp":o.setState({offset:new P(o.state.offset.x,o.state.offset.y+o.props.offsetIncrement)});break;case"ArrowRight":o.setState({offset:new P(o.state.offset.x-o.props.offsetIncrement,o.state.offset.y)});break;case"ArrowDown":o.setState({offset:new P(o.state.offset.x,o.state.offset.y-o.props.offsetIncrement)});break;case"w":o.setState({gridSize:Math.min(2*o.state.gridSize,o.props.gridSizeMaximum)});break;case"s":o.setState({gridSize:Math.max(o.state.gridSize/2,o.props.gridSizeMinimum)});break;case"+":e.ctrlKey&&(o.addZoom(o.props.zoomIncrement),e.preventDefault());break;case"-":e.ctrlKey&&(o.addZoom(-o.props.zoomIncrement),e.preventDefault())}},o._window_Resize_SetSize=function(e){var t=u()(window);o.setState({size:new P(t.width(),t.height())})};var r,a=u()(window),c=new P(a.width(),a.height());return o.state={uniqueID:(r="grid",r in _||(_[r]=0),"".concat(r).concat(_[r]++)),gridSize:32,zoom:1,offset:new P(0,0),size:c,color1:"#202124",color2:"#303136"},o._svg=n.a.createRef(),o}return Object(c.a)(i,[{key:"render",value:function(){var e=this.state.offset.copy().add(this.state.size.copy().divide(2).multiply(this.state.zoom)),t=this.state.size.copy().multiply(this.state.zoom);return Object(C.jsxs)("svg",{className:"".concat(this.props.classes.root," Grid"),ref:this._svg,xmlns:"http://www.w3.org/2000/svg",width:"".concat(this.state.size.x,"px"),height:"".concat(this.state.size.y,"px"),viewBox:"".concat(-e.x,",").concat(-e.y," ").concat(t.x,",").concat(t.y),onMouseDown:this._svg_OnMouseDown_StartDragging,onMouseMove:this._svg_OnMouseMove_Drag,children:[this.renderDefs(),this.renderGrid(e,t),Object(C.jsx)(Q,{tileManager:this.props.tileManager})]})}},{key:"renderDefs",value:function(){return Object(C.jsxs)("defs",{children:[Object(C.jsx)("pattern",{id:"".concat(this.state.uniqueID,"_pattern1"),width:this.state.gridSize,height:this.state.gridSize,patternUnits:"userSpaceOnUse",children:Object(C.jsx)("rect",{width:"".concat(this.state.gridSize,"px"),height:"".concat(this.state.gridSize,"px"),fill:"none",stroke:this.state.color1,strokeWidth:"1"})}),Object(C.jsxs)("pattern",{id:"".concat(this.state.uniqueID,"_pattern2"),width:"".concat(this.props.gridSizeMaximum,"px"),height:"".concat(this.props.gridSizeMaximum,"px"),patternUnits:"userSpaceOnUse",children:[Object(C.jsx)("rect",{width:"".concat(this.props.gridSizeMaximum,"px"),height:"".concat(this.props.gridSizeMaximum,"px"),fill:"url(#".concat(this.state.uniqueID,"_pattern1)")}),Object(C.jsx)("rect",{width:"".concat(this.props.gridSizeMaximum,"px"),height:"".concat(this.props.gridSizeMaximum,"px"),fill:"none",stroke:this.state.color1,strokeWidth:"3"})]})]})}},{key:"renderGrid",value:function(e,t){return Object(C.jsxs)("g",{children:[Object(C.jsx)("rect",{id:"".concat(this.state.uniqueID,"_rect1"),x:"".concat(-e.x,"px"),y:"".concat(-e.y,"px"),width:"100%",height:"100%",fill:"url(#".concat(this.state.uniqueID,"_pattern2)")}),Object(C.jsx)("line",{id:"".concat(this.state.uniqueID,"_line1"),x1:"".concat(-e.x,"px"),y1:"0",x2:"".concat(-e.x+t.x,"px"),y2:"0",stroke:this.state.color2,strokeWidth:"3"}),Object(C.jsx)("line",{id:"".concat(this.state.uniqueID,"_line2"),x1:"0",y1:"".concat(-e.y,"px"),x2:"0",y2:"".concat(-e.y+t.y,"px"),stroke:this.state.color2,strokeWidth:"3"})]})}},{key:"componentDidMount",value:function(){var e=u()(document),t=u()(window),i=u()(this._svg.current);this.props.tileManager.tilePlacedEmitter.on(this._tileManager_TilePlacedEmitter_ForceUpdate),this.props.tileManager.tileErasedEmitter.on(this._tileManager_TileErasedEmitter_ForceUpdate),e.on("mouseup",this._document_MouseUp_StopDragging),e.on("keydown",this._document_KeyDown_Hotkeys),t.on("resize",this._window_Resize_SetSize),i.on("mousewheel",this._svg_MouseWheel_Zoom)}},{key:"componentWillUnmount",value:function(){var e=u()(document),t=u()(window),i=u()(this._svg.current);this.props.tileManager.tilePlacedEmitter.off(this._tileManager_TilePlacedEmitter_ForceUpdate),this.props.tileManager.tileErasedEmitter.off(this._tileManager_TileErasedEmitter_ForceUpdate),e.off("mouseup",this._document_MouseUp_StopDragging),e.off("keydown",this._document_KeyDown_Hotkeys),t.off("resize",this._window_Resize_SetSize),i.off("mousewheel",this._svg_MouseWheel_Zoom)}},{key:"addZoom",value:function(e){var t,i,o;this.setState({zoom:(t=this.state.zoom-e*this.state.zoom*this.props.zoomMultiplier,i=this.props.zoomMinimum,o=this.props.zoomMaximum,Math.min(Math.max(t,i),o))})}},{key:"positionToGrid",value:function(e){return new P(Math.floor(e.x/this.state.gridSize),Math.floor(e.y/this.state.gridSize))}},{key:"gridToPosition",value:function(e){return e.copy().multiply(this.state.gridSize)}}]),i}(n.a.Component);$.contextType=g,$.defaultProps={offsetIncrement:32,zoomIncrement:120,zoomMultiplier:.002,zoomOffsetMultiplier:.24,zoomMinimum:.064,zoomMaximum:4,gridSizeMinimum:2,gridSizeMaximum:128};var ee=Object(y.a)((function(){return Object(b.a)({root:{position:"static",backgroundColor:"#0e0e10"}})}))($),te=function e(){Object(s.a)(this,e)},ie=function(){function e(){Object(s.a)(this,e),this._callbacks=new Map}return Object(c.a)(e,[{key:"on",value:function(e){this._callbacks.set(e,!0)}},{key:"off",value:function(e){this._callbacks.delete(e)}},{key:"once",value:function(e){var t=this;this.on((function(i){e(i),t.off(e)}))}},{key:"emit",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new te,t=e,i=0,o=Array.from(this._callbacks.keys());i<o.length;i++){var n=o[i];n(t)}return t}}]),e}(),oe=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e,o){var n;return Object(s.a)(this,i),(n=t.call(this)).colorID=void 0,n.color=void 0,n.colorID=e,n.color=o,n}return i}(te),ne=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this)).selectedColorID=void 0,o.selectedColorID=e,o}return i}(te),re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(s.a)(this,e),this.colors=void 0,this.colorChangeEmitter=new ie,this.selectedColorIDChangeEmitter=new ie,this._selectedColorID=0,this._defaultColor="#ffffff",this.colors=t,0===this.colors.length&&this.addColor()}return Object(c.a)(e,[{key:"selectedColorID",get:function(){return this._selectedColorID},set:function(e){var t=this.selectedColorIDChangeEmitter.emit(new ne(e));this._selectedColorID=t.selectedColorID}},{key:"selectedColor",get:function(){return this.colors[this.selectedColorID]}},{key:"addColor",value:function(){this.setColor(this.colors.length,this._defaultColor)}},{key:"setColor",value:function(e,t){var i=this.colorChangeEmitter.emit(new oe(e,t));this.colors[i.colorID]=i.color}}]),e}(),ae=i(89),se=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e,o){var n;return Object(s.a)(this,i),(n=t.call(this)).tileID=void 0,n.tileData=void 0,n.tileID=e,n.tileData=o,n}return i}(te),ce=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this)).tileID=void 0,o.tileID=e,o}return i}(te),le=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this)).tileset=void 0,o.tileset=e,o}return i}(te),pe=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this)).tileType=void 0,o.tileType=e,o}return i}(te),he=function(){function e(t){Object(s.a)(this,e),this.tilesets=void 0,this.placedTiles=[],this.tilePlacedEmitter=new ie,this.tileErasedEmitter=new ie,this.selectedTilesetChangedEmitter=new ie,this.selectedTileTypeChangedEmitter=new ie,this._selectedTileset=void 0,this._selectedTileType=void 0,this._currentTileID=0,this.tilesets=t,this._selectedTileset=t[0],this._selectedTileType=this.selectedTileset.tileTypes[0]}return Object(c.a)(e,[{key:"selectedTileset",get:function(){return this._selectedTileset},set:function(e){var t=this.selectedTilesetChangedEmitter.emit(new le(e));this._selectedTileset=t.tileset}},{key:"selectedTileType",get:function(){return this._selectedTileType},set:function(e){var t=this.selectedTileTypeChangedEmitter.emit(new pe(e));this._selectedTileType=t.tileType}},{key:"placeTile",value:function(e){var t=this.tilePlacedEmitter.emit(new se(this._currentTileID++,e));return this.placedTiles[t.tileID]=t.tileData,t.tileID}},{key:"eraseTile",value:function(e){var t=this.tileErasedEmitter.emit(new ce(e)),i=this.placedTiles[t.tileID];return delete this.placedTiles[t.tileID],i}}]),e}(),ue=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(e){var o;return Object(s.a)(this,i),(o=t.call(this,e))._appContext=void 0,o.state={paletteManager:new re(o.props.defaultPaletteColors),tileManager:new he(o.props.tilesets)},o._appContext={theme:o.props.theme},o}return Object(c.a)(i,[{key:"render",value:function(){return Object(C.jsx)(g.Provider,{value:this._appContext,children:Object(C.jsx)(ae.a,{theme:this.props.theme,children:Object(C.jsxs)(x.a,{className:"".concat(this.props.classes.root," App"),children:[this.renderContent(),Object(C.jsx)(H,{paletteManager:this.state.paletteManager,tileManager:this.state.tileManager})]})})})}},{key:"renderContent",value:function(){return Object(C.jsx)(x.a,{className:"Content",children:Object(C.jsx)(ee,{tileManager:this.state.tileManager})})}},{key:"componentDidMount",value:function(){u()(document.documentElement).css({"--theme-primary-main":this.props.theme.palette.primary.main,"--theme-primary-light":this.props.theme.palette.primary.light,"--theme-primary-dark":this.props.theme.palette.primary.dark,"--theme-secondary-main":this.props.theme.palette.secondary.main,"--theme-secondary-light":this.props.theme.palette.secondary.light,"--theme-secondary-dark":this.props.theme.palette.secondary.dark,"--theme-text-primary":this.props.theme.palette.text.primary,"--theme-text-secondary":this.props.theme.palette.text.secondary})}}]),i}(n.a.Component),de=Object(y.a)((function(){return Object(b.a)({root:{userSelect:"none"}})}))(ue),fe=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,98)).then((function(t){var i=t.getCLS,o=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),o(e),n(e),r(e),a(e)}))};var me=function(e,t,i){var o=Object(d.a)({palette:{type:e,primary:{main:t},secondary:{main:i},text:{primary:i,secondary:t}}});return o=Object(f.a)(o)}("dark","#1f2f46","#79c0ff"),ge=function e(t,i){Object(s.a)(this,e),this.id=void 0,this.buildSVG=void 0,this.id=t,this.buildSVG=i},be=[new function e(t,i){Object(s.a)(this,e),this.name=void 0,this.tileTypes=void 0,this.name=t,this.tileTypes=i}("Basic",[new ge("tile1",(function(e){return Object(C.jsx)("rect",{width:1,height:1,fill:e.color})})),new ge("tile2",(function(e){return Object(C.jsx)("path",{d:"M0.5,0 L1,0 L1,1 L0,1 L0,0.5 Z",fill:e.color})})),new ge("tile3",(function(e){return Object(C.jsx)("path",{d:"M1,0 L1,1 L0,1 Z",fill:e.color})})),new ge("tile4",(function(e){return Object(C.jsx)("path",{d:"M0.5,0 L1,0 L1,1 L0,1 L0,0.5 A 0.5,0.5 0 0 1 0.5,0 Z",fill:e.color})})),new ge("tile5",(function(e){return Object(C.jsx)("path",{d:"M1,0 L1,1 L0,1 A 1,1 0 0 1 1,0 Z",fill:e.color})})),new ge("tile6",(function(e){return Object(C.jsx)("path",{d:"M0.5,0 L1,0 L1,1 L0,1 L0,0.5 A 0.5,0.5 0 0 0 0.5,0 Z",fill:e.color})})),new ge("tile7",(function(e){return Object(C.jsx)("path",{d:"M1,0 L1,1 L0,1 A 1,1 0 0 0 1,0 Z",fill:e.color})})),new ge("tile8",(function(e){return Object(C.jsx)("circle",{cx:.5,cy:.5,r:.5,fill:e.color})})),new ge("tile9",(function(e){return Object(C.jsxs)("g",{children:[Object(C.jsx)("path",{d:"M0,0.5 L0,0 L0.5,0 A 0.5,0.5,0 0 0 0 0.5,Z",fill:e.color}),Object(C.jsx)("path",{d:"M1,0.5 A 0.5,0.5 0 0 0 0.5,0 L1,0 Z",fill:e.color}),Object(C.jsx)("path",{d:"M1,0.5 L1,1 L0.5,1 A 0.5,0.5 0 0 0 1,0.5 Z",fill:e.color}),Object(C.jsx)("path",{d:"M0,0.5 A 0.5,0.5 0 0 0 0.5,1 L0,1 Z",fill:e.color})]})})),new ge("tile10",(function(e){return Object(C.jsx)("polygon",{points:"0.5,0 1,1 0,1",fill:e.color})})),new ge("tile11",(function(e){return Object(C.jsxs)("g",{children:[Object(C.jsx)("polygon",{points:"0.25,0 0.5,1 0,1",fill:e.color}),Object(C.jsx)("polygon",{points:"0.75,0 1,1 0.5,1",fill:e.color})]})})),new ge("tile12",(function(e){return Object(C.jsx)("polygon",{points:"0.5,0.5 1,1 0,1",fill:e.color})})),new ge("tile13",(function(e){return Object(C.jsxs)("g",{children:[Object(C.jsx)("polygon",{points:"0.25,0.5 0.5,1 0,1",fill:e.color}),Object(C.jsx)("polygon",{points:"0.75,0.5 1,1 0.5,1",fill:e.color})]})})),new ge("tile14",(function(e){return Object(C.jsx)("polygon",{points:"0,0 0.5,1 1,0 1,1 0,1",fill:e.color})})),new ge("tile15",(function(e){return Object(C.jsx)("polygon",{points:"0,0 0.25,1 0.5,0 0.75,1 1,0 1,1 0,1",fill:e.color})})),new ge("tile16",(function(e){return Object(C.jsx)("polygon",{points:"0,0 0.5,0.5 1,0 1,1 0,1",fill:e.color})})),new ge("tile17",(function(e){return Object(C.jsx)("polygon",{points:"0,0 0.25,0.5 0.5,0 0.75,0.5 1,0 1,1 0,1",fill:e.color})}))])],je=["#ffffff","#cccccc","#000000","#333333","#925c3a","#784f35","#dc6d1c","#f4dd42","#b23434","#631d1d","#81b93b","#4d893a","#5e81ca","#343d65","#cc00ff","#8f00b3","#ffb3ff"];i(68);a.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(de,{theme:me,tilesets:be,defaultPaletteColors:je})}),document.getElementById("root")),fe()}},[[69,1,2]]]);
//# sourceMappingURL=main.84670d09.chunk.js.map